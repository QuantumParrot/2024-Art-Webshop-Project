import{d as V,m as _,a as w}from"./pinia@2.1.7_vue@3.4.19-4NNq-WPh.js";import{a as h}from"./axios@1.6.7-Di5RpEPX.js";import{l as E}from"./loader-BKOny_iI.js";import{a as C}from"./alert-BD52YLeq.js";import{a as I}from"./adminOrder-BHC5T7qO.js";import{_ as N}from"./index-Bci7hHNT.js";import{P as e,n as u,l as j}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import{O as l,P as s,c as b,aH as k,F as O,V as r,ao as L,N as f,aq as g,aj as i}from"./@vue_runtime-core@3.4.19-CzGklseq.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./sweetalert2@11.10.5-D1b63BCh.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BRsWHAsX.js";import"./vue@3.4.19-bS3wBxtn.js";import"./@vue_runtime-dom@3.4.19-DVfTC9pq.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-CIwtLcK9.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-CtCrC8gK.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-Cp1hpGuW.js";import"./vue-router@4.2.5_vue@3.4.19-CGkOaO3i.js";var B={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/2024-Art-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const n=E(),c=C(),{VITE_APP_SITE:y,VITE_APP_PATH:v}=B,S=V("userOrder",{states:()=>({order:{}}),getters:{tempOrder:({order:t})=>{if(t!=null&&t.message.startsWith('{"')){const o=JSON.parse(t.message);return{...t,message:o.message,state:+o.state,project:o.project}}return t}},actions:{getOrder(t,o){n.createLoader("get-single-order"),h.get(`${y}/api/${v}/order/${t}`).then(p=>{const{order:d}=p.data;d!==null?this.order=d:c.toastAlert("查無此訂單","error")}).finally(()=>{n.removeLoader("get-single-order"),o()})},payOrder(t){n.createLoader("pay-order"),h.post(`${y}/api/${v}/pay/${t}`).then(()=>{const o={title:"謝謝您！",text:"我們將立即為您出貨，敬請耐心等待等候！",icon:"success"};c.modalAlert(o),this.getOrder(t)}).catch(o=>c.errorAlert(o)).finally(()=>n.removeLoader("pay-order"))}}}),D={computed:{..._(S,["tempOrder"]),..._(I,["statesCode"])},methods:{...w(S,["getOrder","payOrder"]),submitOrderId({id:t},{resetForm:o}){this.getOrder(t,o)}}},q={class:"main bg-primary text-white"},H={class:"container py-7"},R={class:"row justify-content-center"},z={class:"col-md-6"},F=s("h3",{class:"h2 mb-5"},[s("i",{class:"bi bi-search me-2"}),r(" 查詢訂單進度 ")],-1),W=s("label",{for:"search",class:"mb-4"},"請輸入訂單編號：",-1),J={class:"input-group mb-5"},M=s("button",{type:"submit",class:"btn btn-light"},[s("i",{class:"bi bi-search"})],-1),U=s("p",{class:"mb-5"},"您的搜尋結果：",-1),G={class:"card p-2"},K={class:"border rounded-2 p-5"},Q=s("b",{class:"p-title"},"訂單編號",-1),X=s("b",{class:"p-title"},"訂購日期",-1),Y={class:"mb-3"},Z=s("summary",null,[s("b",{class:"p-title"},"訂購人資訊"),r("（ 展開查看詳細 ）")],-1),x={class:"list-unstyled mt-3"},ss={class:"mb-2"},ts=s("b",null,"姓名",-1),es={class:"mb-2"},os=s("b",null,"電話",-1),rs={class:"mb-2"},as=s("p",{class:"mb-2"},[s("b",null,"地址"),r("：")],-1),ls={class:"mb-2"},is={class:"mb-2"},ns=s("b",null,"信箱",-1),ds={class:"mb-2"},cs=s("b",null,"選擇贊助的專案",-1),ps=s("p",{class:"mb-2"},[s("b",null,"您的留言：")],-1),ms={class:"mb-2"},_s=s("p",null,[s("b",{class:"p-title mb-0"},"訂購品項"),r("：")],-1),hs={class:"table-responsive"},us={class:"table text-nowrap"},bs=s("thead",null,[s("tr",null,[s("th",{scope:"col"}),s("th",{scope:"col",width:"20%"}),s("th",{scope:"col",width:"10%"}),s("th",{scope:"col",width:"20%"})])],-1),Os={class:"align-middle"},fs={class:"ps-0"},gs=s("td",null,[s("span",{class:"arrow-animation"},[s("span",{class:"arrow"},"→")])],-1),ys={class:"pe-0 text-end"},vs={class:"flex-classic"},Ss=s("span",null,"NT$",-1),Ps={colspan:"5",class:"px-0 py-3"},$s={class:"flex-classic"},As={class:"mb-0"},Ts=s("strong",null,"總計：",-1),Vs={class:"d-flex align-items-center"},ws=s("span",null,[s("b",{class:"p-title"},"付款狀態"),r("：")],-1),Es={class:"mb-0"},Cs=s("span",null,[s("b",{class:"p-title"},"出貨狀態"),r("：")],-1);function Is(t,o,p,d,Ns,P){var m;const $=g("v-field"),A=g("v-form");return i(),l("div",q,[s("div",H,[s("div",R,[s("div",z,[F,W,b(A,{onSubmit:P.submitOrderId},{default:k(({errors:a})=>[s("div",J,[b($,{id:"search",type:"text",class:u(["form-control",{"is-invalid":a.id}]),name:"id",rules:"required"},null,8,["class"]),M])]),_:1},8,["onSubmit"]),(m=t.tempOrder)!=null&&m.id?(i(),l(O,{key:0},[U,s("div",G,[s("div",K,[s("p",null,[Q,r("："+e(t.tempOrder.id),1)]),s("p",null,[X,r("："+e(t.tempOrder.create_at),1)]),s("details",Y,[Z,s("ul",x,[s("li",ss,[ts,r("："+e(t.tempOrder.user.name),1)]),s("li",es,[os,r("："+e(t.tempOrder.user.tel),1)]),s("li",rs,[as,s("p",ls,e(t.tempOrder.user.address),1)]),s("li",is,[ns,r("："+e(t.tempOrder.user.email),1)]),s("li",ds,[cs,r("："+e(t.tempOrder.project),1)]),s("li",null,[ps,s("p",ms,e(t.tempOrder.message),1)])])]),_s,s("div",hs,[s("table",us,[bs,s("tbody",Os,[(i(!0),l(O,null,L(t.tempOrder.products,(a,T)=>(i(),l("tr",{key:T},[s("td",fs,e(a.product.title),1),s("td",null,e(a.qty)+" "+e(a.product.unit),1),gs,s("td",ys,[s("div",vs,[Ss,s("span",null,e(a.total),1)])])]))),128))]),s("tfoot",null,[s("tr",null,[s("td",Ps,[s("div",$s,[s("p",As,[Ts,r("NT$ "+e(t.tempOrder.total),1)]),t.tempOrder.is_paid?f("",!0):(i(),l("button",{key:0,type:"button",class:"btn btn-highlight",onClick:o[0]||(o[0]=a=>t.payOrder(t.tempOrder.id))}," 付款去"))])])])])]),s("p",Vs,[ws,s("span",{class:u(["me-2",t.tempOrder.is_paid?"text-success":"text-danger"])},e(t.tempOrder.is_paid?"已付款":"未付款"),3)]),s("p",Es,[Cs,s("span",{style:j({color:t.statesCode[t.tempOrder.state].color})},e(t.statesCode[t.tempOrder.state].title),5)])])])])],64)):f("",!0)])])])])}const st=N(D,[["render",Is]]);export{st as default};
