import{m as h}from"./pinia@2.1.7_vue@3.4.19-BaxWQ2Jo.js";import{a as f}from"./alert--M56XNVX.js";import{C as g}from"./clipboard@2.0.11-BIMaK3BZ.js";import{_ as u}from"./index-Aq6UGSbs.js";import{aj as r,O as l,P as e,N as m,aJ as b,F as c,c as U,aq as v}from"./@vue_runtime-core@3.4.19-CzGklseq.js";import{n as P,m as y}from"./@vue_runtime-dom@3.4.19-DVfTC9pq.js";import{P as n}from"./@vue_shared@3.4.19-Bk7MlA8B.js";const A={props:["value"],data(){return{clipboard:""}},mounted(){this.clipboard=new g(this.$refs.trigger)}},S={class:"input-group"},w=["value"],C={class:"input-group-text","data-clipboard-target":"#clipboard-content",ref:"trigger"},x=e("button",{type:"button",class:"btn-origin"},[e("i",{class:"bi bi-copy"})],-1),E=[x];function I(t,o,i,p,s,a){return r(),l("div",S,[e("input",{type:"text",class:"form-control",id:"clipboard-content",value:i.value,readonly:""},null,8,w),e("span",C,E,512)])}const T=u(A,[["render",I]]);var V={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/2024-Art-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_SITE:D,VITE_APP_PATH:N}=V,$={components:{ClipboardComponent:T},props:["useClipboard","disabled","uploadState"],emits:["update-upload-state","add-new-image"],data(){return{image:{},isUploading:!1,imageUrl:""}},methods:{...h(f,["errorAlert","uploadAlert"]),confirmUpload(){if(this.$refs.file.files.length){const t=this.$refs.file.files[0];this.image=t}else this.reset()},upload(){if(this.uploadAlert(this.image)){this.isUploading=!0;const o=new FormData;o.append("file-to-upload",this.image),this.$http.post(`${D}/api/${N}/admin/upload`,o).then(i=>{const{imageUrl:p}=i.data;this.imageUrl=p,this.reset()}).catch(i=>this.errorAlert(i)).finally(()=>{this.isUploading=!1})}},reset(){this.$refs.form.reset(),this.image={}},updateState(t){this.$emit("update-upload-state",t)},addNewImage(t){this.$emit("add-new-image",t)}},watch:{isUploading(t){this.updateState(t)},imageUrl(t){t&&this.addNewImage(t)}},mounted(){this.isUploading=this.uploadState}},k=e("p",{class:"fs-7 text-danger"},"僅限 JPG、JPEG 與 PNG 格式，檔案大小限制為 3MB 以下。",-1),B={method:"post",enctype:"multipart/form-data",ref:"form"},F={key:0,class:"alert bg-light"},J=e("p",{class:"fw-bold"},"檔案資訊",-1),G={class:"mb-0"},M=["disabled"],O={class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},R=["textContent"],j={key:0,class:"alert bg-light mt-3"},H=e("p",null,"複製圖片網址：",-1),q=["src"];function z(t,o,i,p,s,a){const _=v("clipboard-component");return r(),l(c,null,[k,e("form",B,[e("input",{type:"file",name:"file-to-upload",class:"form-control mb-3",onChange:o[0]||(o[0]=(...d)=>a.confirmUpload&&a.confirmUpload(...d)),ref:"file"},null,544),s.image.name?(r(),l("div",F,[J,e("p",null,"檔案名稱："+n(s.image.name),1),e("p",null,"檔案大小："+n(s.image.size)+" bytes",1),e("p",G,"檔案格式："+n(s.image.type),1)])):m("",!0),e("button",{type:"submit",class:"btn btn-primary",onClick:o[1]||(o[1]=P((...d)=>a.upload&&a.upload(...d),["prevent"])),disabled:i.disabled||s.isUploading},[b(e("span",O,null,512),[[y,s.isUploading]]),e("span",{textContent:n(s.isUploading?"上傳中，請稍候":"確認上傳")},null,8,R)],8,M)],512),i.useClipboard?(r(),l(c,{key:0},[s.imageUrl?(r(),l("div",j,[H,U(_,{value:s.imageUrl},null,8,["value"]),e("img",{class:"mt-3",src:s.imageUrl,alt:"uploaded-image-preview"},null,8,q)])):m("",!0)],64)):m("",!0)],64)}const ee=u($,[["render",z]]);export{ee as U};
