import{m as b,a as _}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{u as k}from"./userProduct-hXqBbad6.js";import{c as $}from"./userCart-B29TuF3F.js";import{P as j,u as x}from"./ProductCard-Cwm-91S0.js";import{l as V}from"./alert-Dw2Xe9FX.js";import{_ as q}from"./index-Cbhzms45.js";import{z as n,A as r,Q as t,al as M,ak as P,aJ as f,c as p,aH as h,F as u,ao as g,P as C,V as N,aq as v,W as y,O as L}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{m as I,l as A}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{P as l,n as d}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./axios@1.6.7-Di5RpEPX.js";import"./sweetalert2@11.10.5-Csd-Z1-j.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BEtXLgA-.js";import"./vue@3.4.19-C3VIO2t_.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DaNcwJXO.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";const B={data(){return{modal:""}},props:["image"],methods:{showModal(){this.modal.showModal()},hideModal(){this.modal.close()},initImage(){this.$nextTick(()=>{const{naturalWidth:s}=this.$refs.image;s<800?this.$refs.image.style.width="100%":this.$refs.image.style.width=s})}},watch:{image(){this.initImage()}},mounted(){this.modal=this.$refs.modal}},E=s=>(M("data-v-09f993c2"),s=s(),P(),s),R={class:"bg-white rounded-2 shadow pt-0",ref:"modal"},U={class:"sticky-top bg-white d-flex justify-content-end py-3"},D=E(()=>t("i",{class:"bi bi-x-circle-fill"},null,-1)),Z=[D],F={class:"d-flex overflow-scroll"},W=["src"];function H(s,o,w,S,e,c){return n(),r("dialog",R,[t("div",U,[t("button",{type:"button",class:"btn border-0 p-0 fs-4",onClick:o[0]||(o[0]=(...m)=>c.hideModal&&c.hideModal(...m))},Z)]),t("div",F,[t("img",{src:w.image,alt:"zoom-in-image",ref:"image"},null,8,W)])],512)}const J=q(B,[["render",H],["__scopeId","data-v-09f993c2"]]),O={components:{ZoomImageModal:J,ProductCard:j},data(){return{transition:!0,frame:"",frameSetting:{wooden:"frame-wooden",golden:"frame-golden",dark:"frame-dark",baroque:"frame-baroque"},mainImage:"",quantity:1,zoomImage:""}},computed:{...b(k,["product","relatedProducts"]),...b(V,["isLoading","loadingTask"]),...b(x,["collection"]),displayImages(){const{imageUrl:s,imagesUrl:o}=this.product;return Array.isArray(o)?[s,...o]:[s]}},methods:{..._(k,["getProduct","getRelatedProducts"]),..._($,["addToCart"]),..._(x,["getCollection","updateCollection"]),openModal(){this.zoomImage=this.mainImage,this.$refs.zoomImageModal.showModal()}},watch:{"$route.params":{handler(){this.getProduct(this.$route.params.id)},deep:!0},product(){this.getRelatedProducts(this.product),this.mainImage=this.product.imageUrl,this.quantity=1,this.frame="",this.transition=!1,window.scrollTo(0,0,"smooth")},quantity(s){Number.isInteger(s)?s<1&&(this.quantity=1):this.quantity=Math.floor(this.quantity)},collection:{handler(){this.updateCollection()},deep:!0}},mounted(){this.getProduct(this.$route.params.id),this.getCollection()}},a=s=>(M("data-v-91584255"),s=s(),P(),s),Q={class:"h-100 bg-gray text-primary"},G={class:"container py-7"},K={class:"d-flex justify-content-center"},X={class:"mb-5",style:{"--bs-breadcrumb-divider":`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`},"aria-label":"breadcrumb"},Y={class:"breadcrumb flex-nowrap text-nowrap overflow-x-scroll"},tt={class:"breadcrumb-item"},st={class:"breadcrumb-item"},ot={class:"breadcrumb-item"},et={class:"d-md-block d-none breadcrumb-item active","aria-current":"page"},it={class:"mb-5"},at=["src","alt"],lt={class:"bg-light rounded-2 p-3 mb-5 d-flex gap-3 overflow-x-scroll"},nt=["src","alt","onClick"],rt={class:"overflow-x-scroll"},dt={key:0,class:"frames d-flex flex-nowrap text-nowrap mb-5"},ct=a(()=>t("b",null,"無畫框",-1)),mt=[ct],pt=a(()=>t("b",null,"極簡黑",-1)),ut=[pt],ht=a(()=>t("b",null,"淺木紋",-1)),bt=[ht],_t=a(()=>t("b",null,"典雅金",-1)),ft=[_t],gt=a(()=>t("b",null,"巴洛克",-1)),vt=[gt],yt={class:"text-black mb-5"},wt={class:"mb-0"},kt=a(()=>t("hr",null,null,-1)),xt={class:"row g-5 mb-5"},Ct={class:"col-xl-7 order-xl-1 order-2"},It={class:"h-100 d-flex flex-column"},qt={class:"flex-grow-1 alert bg-light p-5 mb-5"},Mt={class:"h-100 border border-gray rounded-2 p-5 pb-6 d-flex flex-column justify-content-between"},Pt=a(()=>t("h3",{class:"lh-lg fs-4 text-dark fw-bold mb-5"},[t("span",{class:"section-title"},"關於它的故事")],-1)),St={class:"lh-lg pre-wrap text-justify mb-6"},Tt=a(()=>t("p",{class:"fs-7 mb-5"},"點選下方標籤，搜尋相關商品：",-1)),zt={class:"d-flex gap-2 flex-nowrap text-nowrap overflow-scroll"},$t=a(()=>t("div",{class:"alert bg-light p-5 mb-0"},[t("p",{class:"lh-lg mb-0"},[t("i",{class:"bi bi-c-circle me-1"}),t("span",null,[y("圖片與文字參考資料請參閱："),t("a",{target:"_blank",href:"https://www.notion.so/9f522b0de5c2413c8090249c96bd692a?v=5b0f1f1c376f4b468a56aaec87a97c8a"},"本站索引")])])],-1)),jt={class:"col-xl-5 order-xl-2 order-1"},Vt={class:"sticky-sidebar"},Nt={class:"alert bg-light p-5 mb-5"},Lt=a(()=>t("h4",{class:"fs-5 text-dark fw-bold mb-4"},"購買須知",-1)),At={class:"lh-xl pre-wrap text-justify mb-0"},Bt={class:"alert bg-light p-5 mb-5"},Et={class:"mb-5"},Rt={class:"text-nowrap overflow-x-scroll"},Ut=a(()=>t("span",{class:"fs-6 badge bg-primary px-3 py-2 me-2"},"規格",-1)),Dt={class:"text-nowrap overflow-x-scroll"},Zt=a(()=>t("span",{class:"fs-6 badge bg-primary px-3 py-2 me-2"},"單位",-1)),Ft={class:"alert bg-white p-5 mb-0"},Wt={class:"fs-5 fw-bold mb-5"},Ht=a(()=>t("span",null,"NT＄",-1)),Jt={class:"text-muted text-decoration-line-through"},Ot=a(()=>t("span",{class:"arrow-animation"},[t("span",{class:"arrow"}," → ")],-1)),Qt={class:"row g-3"},Gt={class:"col-sm-8"},Kt={class:"input-group"},Xt=["disabled"],Yt=a(()=>t("i",{class:"bi bi-dash"},null,-1)),ts=[Yt],ss=a(()=>t("i",{class:"bi bi-plus"},null,-1)),os=[ss],es={class:"col-sm-4 text-end"},is=["disabled"],as={class:"spinner-border spinner-border-sm me-2",role:"status"},ls=a(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),ns=[ls],rs=N('<div class="alert bg-light p-5 mb-0" data-v-91584255><div class="row g-3" data-v-91584255><div class="col-sm-4" data-v-91584255><div class="d-flex flex-sm-column justify-content-sm-center align-items-center" data-v-91584255><div class="bg-white rounded-pill shadow-sm px-3 py-2 mb-sm-3 me-sm-0 me-3" data-v-91584255><i class="bi bi-truck fs-3" data-v-91584255></i></div><span data-v-91584255>專業物流配送</span></div></div><div class="col-sm-4" data-v-91584255><div class="d-flex flex-sm-column justify-content-sm-center align-items-center" data-v-91584255><div class="bg-white rounded-pill shadow-sm px-3 py-2 mb-sm-3 me-sm-0 me-3" data-v-91584255><i class="bi bi-7-circle fs-3" data-v-91584255></i></div><span data-v-91584255>七天鑑賞期</span></div></div><div class="col-sm-4" data-v-91584255><div class="d-flex flex-sm-column justify-content-sm-center align-items-center" data-v-91584255><div class="bg-white rounded-pill shadow-sm px-3 py-2 mb-sm-3 me-sm-0 me-3" data-v-91584255><i class="bi bi-recycle fs-3" data-v-91584255></i></div><span data-v-91584255>採用環保包裝</span></div></div></div></div>',1),ds={class:"alert bg-white p-5"},cs=a(()=>t("h4",{class:"text-center mb-5"},"為您推薦",-1)),ms={class:"row g-5"};function ps(s,o,w,S,e,c){const m=v("RouterLink"),T=v("ProductCard"),z=v("ZoomImageModal");return n(),r(u,null,[f(t("div",Q,[t("div",G,[t("div",K,[t("div",null,[t("nav",X,[t("ol",Y,[t("li",tt,[p(m,{to:"/"},{default:h(()=>[y("首頁")]),_:1})]),t("li",st,[p(m,{to:"/products"},{default:h(()=>[y("商品列表")]),_:1})]),t("li",ot,[p(m,{to:`/products?category=${s.product.category}`},{default:h(()=>[t("span",null,l(s.product.category),1)]),_:1},8,["to"])]),t("li",et,[t("span",null,l(s.product.title),1)])])]),t("div",it,[t("img",{class:d(["main-img",e.frame?e.frameSetting[e.frame]:""]),src:e.mainImage,alt:s.product.title,width:"600",onClick:o[0]||(o[0]=(...i)=>c.openModal&&c.openModal(...i))},null,10,at)]),t("div",lt,[(n(!0),r(u,null,g(c.displayImages,i=>(n(),r("img",{key:i,class:d(["display-img",{"opacity-50":i!==e.mainImage}]),src:i,alt:s.product.title,onClick:us=>e.mainImage=i},null,10,nt))),128))]),t("div",rt,[s.product.category==="複製油畫"?(n(),r("div",dt,[t("button",{type:"button",class:d(["fs-7 btn btn-outline-primary",{active:e.frame===""}]),onClick:o[1]||(o[1]=i=>e.frame="")},mt,2),t("button",{type:"button",class:d(["fs-7 btn btn-outline-primary",{active:e.frame==="dark"}]),onClick:o[2]||(o[2]=i=>e.frame="dark")},ut,2),t("button",{type:"button",class:d(["fs-7 btn btn-outline-primary",{active:e.frame==="wooden"}]),onClick:o[3]||(o[3]=i=>e.frame="wooden")},bt,2),t("button",{type:"button",class:d(["fs-7 btn btn-outline-primary",{active:e.frame==="golden"}]),onClick:o[4]||(o[4]=i=>e.frame="golden")},ft,2),t("button",{type:"button",class:d(["fs-7 btn btn-outline-primary",{active:e.frame==="baroque"}]),onClick:o[5]||(o[5]=i=>e.frame="baroque")},vt,2)])):C("",!0)]),t("h2",yt,l(s.product.title),1),t("p",wt,l(s.product.subtitle),1)])]),kt,t("div",xt,[t("div",Ct,[t("div",It,[t("div",qt,[t("div",Mt,[t("div",null,[Pt,t("div",St,[t("span",null,l(s.product.description),1)])]),t("div",null,[Tt,t("div",zt,[(n(!0),r(u,null,g(s.product.tags,i=>(n(),L(m,{key:i,to:`/search?keyword=${i}`,target:"_blank",class:"tag badge fs-6 py-2"},{default:h(()=>[t("span",null,l(i),1)]),_:2},1032,["to"]))),128))])])])]),$t])]),t("div",jt,[t("div",Vt,[t("div",Nt,[Lt,t("p",At,l(s.product.notes||"無"),1)]),t("div",Bt,[t("div",Et,[t("p",Rt,[Ut,t("span",null,l(s.product.content),1)]),t("p",Dt,[Zt,t("span",null,"一"+l(s.product.unit),1)])]),t("div",Ft,[t("p",Wt,[Ht,s.product.origin_price>s.product.price?(n(),r(u,{key:0},[t("span",Jt,l(s.product.origin_price),1),Ot],64)):C("",!0),t("span",null,l(s.product.price),1)]),t("div",Qt,[t("div",Gt,[t("div",Kt,[t("button",{type:"button",class:"btn btn-secondary input-group-text",onClick:o[6]||(o[6]=i=>this.quantity-=1),disabled:e.quantity<=1},ts,8,Xt),f(t("input",{type:"number",class:"form-control text-center",min:"1","onUpdate:modelValue":o[7]||(o[7]=i=>e.quantity=i)},null,512),[[A,e.quantity,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-secondary input-group-text",onClick:o[8]||(o[8]=i=>this.quantity+=1)},os)])]),t("div",es,[t("button",{type:"button",class:"w-100 btn btn-primary",onClick:o[9]||(o[9]=i=>s.addToCart(s.product.id,e.quantity)),disabled:!!s.loadingTask},[f(t("div",as,ns,512),[[I,s.loadingTask]]),t("span",null,l(s.loadingTask?"加入中":"加入購物車"),1)],8,is)])])])]),rs])])]),t("div",ds,[cs,t("div",ms,[(n(!0),r(u,null,g(s.relatedProducts,i=>(n(),r("div",{key:i.id,class:"col-md-4"},[p(T,{product:i},null,8,["product"])]))),128))])])])],512),[[I,!e.transition]]),p(z,{image:e.zoomImage,ref:"zoomImageModal"},null,8,["image"])],64)}const As=q(O,[["render",ps],["__scopeId","data-v-91584255"]]);export{As as default};
