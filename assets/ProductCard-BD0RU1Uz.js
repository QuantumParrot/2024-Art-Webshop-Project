import{d as p,m as d,a as r}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{c as m}from"./userCart-Dyu3INCi.js";import{a as f,l as g}from"./alert-BXjizhtP.js";import{_ as b}from"./index-CiwxSB-b.js";import{z as i,A as l,Q as t,c as v,aH as C,F as S,P as y,aq as k,al as w,ak as x}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as n,n as I}from"./@vue_shared@3.4.19-Bk7MlA8B.js";const a=f(),u=p("userCollection",{state:()=>({collection:[]}),actions:{getCollection(){this.collection=JSON.parse(localStorage.getItem("collection"))||[]},toggleCollection(s){const e=this.collection.findIndex(o=>o===s);e===-1?(this.collection.push(s),a.toastAlert("已加入收藏","success")):(this.collection.splice(e,1),a.toastAlert("已移除收藏","success"))},updateCollection(){this.collection.length?localStorage.setItem("collection",JSON.stringify(this.collection)):localStorage.removeItem("collection")},clearCollection(){const s={title:"確定清空所有收藏嗎？"};a.checkAlert(s,()=>{this.collection.length=0,a.toastAlert("我們懷念它 (´・ω・`)","success")})}}}),A={props:["product"],computed:{...d(g,["loadingTask"]),...d(u,["collection"])},methods:{...r(m,["addToCart"]),...r(u,["toggleCollection"])}},c=s=>(w("data-v-bf414aae"),s=s(),x(),s),N={class:"h-100 card overflow-hidden"},T={class:"overflow-hidden"},P={class:"card-img overflow-hidden"},B=["src","alt"],L=c(()=>t("div",{class:"card-navigate"},[t("button",{type:"button",class:"btn fs-4 text-light"},[t("i",{class:"bi bi-search"})])],-1)),V={class:"card-body py-5"},z={class:"mb-5"},F={class:"h-100 d-flex flex-column justify-content-between"},J={class:"flex-grow-1 d-flex gap-3 mb-3"},O={class:"fs-5 fw-bold text-primary overflow-scroll mb-0 text-nowrap"},R={class:"fs-6"},j=c(()=>t("span",null,"NT＄",-1)),q={class:"text-decoration-line-through text-muted"},D=c(()=>t("span",{class:"arrow-animation"},[t("span",{class:"arrow"}," → ")],-1)),E={class:"fw-bold"},H={class:"flex-classic gap-3"},Q=["disabled"],U={key:0,role:"status",class:"spinner-border spinner-border-sm"},G=c(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),K=[G],M={key:1,class:"bi bi-cart-plus-fill"},W=c(()=>t("span",{class:"ms-2"},"加入購物車",-1));function X(s,e,o,Y,Z,$){const _=k("RouterLink");return i(),l("div",N,[t("div",T,[t("div",P,[v(_,{to:`/product/${o.product.id}`},{default:C(()=>[t("img",{class:"card-img-top",src:o.product.imageUrl,alt:o.product.title},null,8,B),L]),_:1},8,["to"])])]),t("div",V,[t("div",z,[t("div",F,[t("div",J,[t("h4",O,n(o.product.title),1)]),t("div",R,[j,o.product.price<o.product.origin_price?(i(),l(S,{key:0},[t("span",null,[t("span",q,n(o.product.origin_price),1)]),D],64)):y("",!0),t("span",E,n(o.product.price)+" 元",1)])])]),t("div",H,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:e[0]||(e[0]=h=>s.toggleCollection(o.product.id))},[t("i",{class:I(["bi",s.collection.includes(o.product.id)?"bi-heart-fill":"bi-heart"])},null,2)]),t("button",{type:"button",class:"w-100 btn btn-primary",onClick:e[1]||(e[1]=h=>s.addToCart(o.product.id)),disabled:s.loadingTask===o.product.id},[s.loadingTask===o.product.id?(i(),l("div",U,K)):(i(),l("i",M)),W],8,Q)])])])}const lt=b(A,[["render",X],["__scopeId","data-v-bf414aae"]]);export{lt as P,u};
