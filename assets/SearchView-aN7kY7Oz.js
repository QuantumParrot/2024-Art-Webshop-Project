import{m,a as y}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{u as p}from"./userProduct-DvVBjULb.js";import{l as _}from"./alert-8GdQBstY.js";import{P as w}from"./ProductCard-CgEDDFRq.js";import{m as h,w as k,l as b}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{_ as f}from"./index-CdXMXJ_I.js";import{A as i,Q as t,aJ as l,W as a,F as g,ao as P,z as c,c as v,aq as S}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as n}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./axios@1.6.7-Di5RpEPX.js";import"./sweetalert2@11.10.5-Csd-Z1-j.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BEtXLgA-.js";import"./vue@3.4.19-C3VIO2t_.js";import"./userCart-x-FpTMdM.js";/* empty css                               *//* empty css                          */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./vue3-lottie@3.3.0_vue@3.4.19-B_fkVG75.js";import"./lottie-web@5.12.2-DrG9waUi.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DaNcwJXO.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";import"./aos@2.3.4-DSOO8Lb4.js";const T={components:{ProductCard:w},data(){return{totalProducts:[],keywordTemp:"",keyword:"",results:[]}},computed:{...m(p,["productList"]),...m(_,["isLoading"])},watch:{"$route.query.keyword":{handler(o){this.keyword=o||"",this.search()},deep:!0}},methods:{...y(p,["getProducts"]),startSearch(){this.keywordTemp&&this.$router.push(`${this.$route.path}?keyword=${this.keywordTemp}`)},search(){this.keyword=this.keywordTemp,this.results=this.productList.filter(o=>o.title.match(this.keyword)||o.tags.some(s=>s.match(this.keyword)))},reset(){this.keyword="",this.keywordTemp="",this.results.length=0}},created(){this.keywordTemp=this.$route.query.keyword||""},async mounted(){if(this.productList.length)this.totalProducts=this.productList;else{const o=await this.getProducts();this.totalProducts=o}this.search()},unmounted(){this.reset()}},x={class:"h-100 bg-gray text-primary"},L={class:"container py-7"},C={class:"py-5 mb-7"},V=t("h2",{class:"text-center mb-7"},[t("b",null,"商品搜尋")],-1),q={class:"row justify-content-center mb-7"},B={class:"col-md-6"},N={class:"input-group"},A=["disabled"],D=t("i",{class:"bi bi-search"},null,-1),F=[D],K={class:"mb-5"},j={key:0,class:"row list-unstyled g-6"},z={key:1,class:"alert bg-light py-5 mb-0"},E={class:"text-center mb-0"};function J(o,s,M,Q,e,d){const u=S("ProductCard");return c(),i("div",x,[t("div",L,[l(t("div",C,[V,t("div",q,[t("div",B,[t("div",N,[l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=r=>e.keywordTemp=r),placeholder:"輸入您想搜尋的關鍵字",onKeyup:s[1]||(s[1]=k((...r)=>d.startSearch&&d.startSearch(...r),["enter"]))},null,544),[[b,e.keywordTemp]]),t("button",{type:"button",class:"btn btn-primary",disabled:!e.keywordTemp,onClick:s[2]||(s[2]=(...r)=>d.startSearch&&d.startSearch(...r))},F,8,A)])])]),l(t("p",K,[a(" 您搜尋的關鍵字為："),t("b",null,n(e.keyword),1),a("，共有 "),t("b",null,n(e.results.length),1),a(" 項商品 ")],512),[[h,e.keyword]]),e.results.length?(c(),i("ul",j,[(c(!0),i(g,null,P(e.results,r=>(c(),i("li",{key:r.id,class:"col-xl-4 col-md-6"},[v(u,{product:r},null,8,["product"])]))),128))])):(c(),i("div",z,[t("p",E,n(e.keyword?"找不到您要的結果":"請輸入關鍵字"),1)]))],512),[[h,e.totalProducts.length]])])])}const _t=f(T,[["render",J]]);export{_t as default};
