import{a as o}from"./axios@1.6.7-Di5RpEPX.js";import{d}from"./pinia@2.1.7_vue@3.4.19-CHKlOEZr.js";import{l as i,a as n}from"./alert-rz954VAU.js";var p={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/2024-Art-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const r=i(),a=n(),{VITE_APP_SITE:c,VITE_APP_PATH:l}=p,_=d("userCart",{state:()=>({carts:[]}),actions:{getCarts(){o.get(`${c}/api/${l}/cart`).then(t=>{this.carts=t.data.data.carts}).catch(t=>a.errorAlert(t)).finally(()=>{})},addToCart(t,e=1){r.setLoader(t),o.post(`${c}/api/${l}/cart`,{data:{product_id:t,qty:e}}).then(s=>{a.toastAlert(s.data.message,"success"),this.getCarts()}).catch(s=>a.errorAlert(s)).finally(()=>r.setLoader(""))}},updateCart(t,e){r.createLoader("update-cart"),o.put(`${c}/api/${l}/cart/${t.id}`,{data:{product_id:t.product_id,qty:e}}).then(s=>{a.toastAlert(s.data.message,"success"),this.getCarts()}).catch(s=>a.errorAlert(s)).finally(()=>r.removeLoader("update-cart"))},deleteSingleCart(t){r.createLoader("delete-single-cart"),o.delete(`${c}/api/${l}/cart/${t}`).then(e=>{a.toastAlert(e.data.message,"success"),this.getCarts()}).catch(e=>a.errorAlert(e)).finally(()=>r.removeLoader("delete-single-cart"))},clearCart(){r.createLoader("delete-all-carts"),o.delete(`${c}/api/${l}/carts`).then(t=>{a.toastAlert(t.data.message,"success"),this.getCarts()}).catch(t=>a.errorAlert(t)).finally(()=>r.removeLoader("delete-all-carts"))},useCoupon(t){o.post(`${c}/api/${l}/coupon`,{data:{code:t}}).then(e=>{console.log(e.data)}).catch(e=>a.errorAlert(e))}});export{_ as u};
