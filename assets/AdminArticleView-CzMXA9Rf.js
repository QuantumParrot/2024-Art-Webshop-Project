import{f as k}from"./filter-z7rnPMJX.js";import{m as y,a as w}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{a as u}from"./adminArticle-D2DPJtTb.js";import{P as C}from"./PaginationComponent-Bgj93fBV.js";import{n as h}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{_ as P}from"./index-lOBDqVH4.js";import{A as r,Q as t,c as p,aH as f,F as g,ao as x,aq as b,z as c,al as A,ak as S}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{n as a,P as o}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./axios@1.6.7-Di5RpEPX.js";import"./alert-Dw2Xe9FX.js";import"./sweetalert2@11.10.5-Csd-Z1-j.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BEtXLgA-.js";import"./vue@3.4.19-C3VIO2t_.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DaNcwJXO.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";const F={components:{PaginationComponent:C},mixins:[k],data(){return{filter:"網站公告",currentPage:1}},computed:{...y(u,["articles"]),filterArticles(){return this.articles.filter(s=>s.type===this.filter)},displaying(){return this.filterArticles.filter((s,i)=>Math.floor(i/5)+1===this.currentPage)},totalPages(){return Math.ceil(this.filterArticles.length/5)}},methods:{...w(u,["getArticles","deleteArticle"])},created(){this.articles.length||this.getArticles()}},l=s=>(A("data-v-983c3c15"),s=s(),S(),s),I={class:"lh-lg nav nav-tabs nav-fill mb-3 border-bottom"},M={class:"nav-item"},B=l(()=>t("b",null,"網站公告",-1)),L=[B],V={class:"nav-item"},z=l(()=>t("b",null,"專欄文章",-1)),D=[z],N={class:"nav-item"},R=l(()=>t("b",null,"公益計劃",-1)),q=[R],E={class:"text-end mb-3"},H={class:"text-muted"},Q={class:"alert bg-gray flex-classic mb-6"},$=["onClick"],j={key:0,class:"table-responsive"},G={class:"table table-hover text-nowrap"},J=l(()=>t("th",{scope:"col",width:"10%"},"日期",-1)),K=l(()=>t("th",{scope:"col",width:"10%"},"分類",-1)),O={scope:"col",width:"50%"},T=l(()=>t("th",{scope:"col",width:"15%",class:"text-center"},"狀態",-1)),U=l(()=>t("th",{scope:"col",width:"15%",class:"text-center"},"處理",-1)),W={class:"align-middle"},X={class:"badge bg-highlight text-dark py-2"},Y={class:"fw-bold mb-2"},Z={class:"text-muted fs-7"},tt={class:"text-center"},et={class:"text-center"},st={class:"d-flex flex-column gap-2"},ot=["onClick"],it=["onClick"],nt={key:1,class:"alert bg-gray"};function lt(s,i,rt,ct,n,d){const _=b("RouterLink"),v=b("PaginationComponent");return c(),r(g,null,[t("ul",I,[t("li",M,[t("a",{href:"#",class:a(["nav-link py-3",{active:n.filter==="網站公告"}]),onClick:i[0]||(i[0]=h(e=>s.switchFilter("網站公告"),["prevent"]))},L,2)]),t("li",V,[t("a",{href:"#",class:a(["nav-link py-3",{active:n.filter==="專欄文章"}]),onClick:i[1]||(i[1]=h(e=>s.switchFilter("專欄文章"),["prevent"]))},D,2)]),t("li",N,[t("a",{href:"#",class:a(["nav-link py-3",{active:n.filter==="公益計劃"}]),onClick:i[2]||(i[2]=h(e=>s.switchFilter("公益計劃"),["prevent"]))},q,2)])]),t("div",E,[t("p",H,"目前共有 "+o(d.filterArticles.length)+" 篇"+o(n.filter),1)]),t("div",Q,[t("div",null,[p(_,{to:`/admin/article/${n.filter}`,custom:""},{default:f(({navigate:e})=>[t("button",{type:"button",class:"btn btn-highlight",onClick:e}," 新增"+o(n.filter),9,$)]),_:1},8,["to"])]),p(v,{current:n.currentPage,total:d.totalPages,onSwitchPage:s.switchPage},null,8,["current","total","onSwitchPage"])]),s.articles.length?(c(),r("div",j,[t("table",G,[t("thead",null,[t("tr",null,[J,K,t("th",O,o(n.filter),1),T,U])]),t("tbody",W,[(c(!0),r(g,null,x(d.displaying,e=>(c(),r("tr",{key:e.id},[t("td",null,o(s.$calc.formatDate(e.create_at*1e3,"/")),1),t("td",null,[t("span",X,o(e.category),1)]),t("td",null,[t("p",Y,o(e.title),1),t("span",Z,"作者｜"+o(e.author),1)]),t("td",tt,[t("p",{class:a(e.isPublic?"text-success":"text-muted")},[t("b",null,o(e.isPublic?"公開":"草稿"),1)],2)]),t("td",et,[t("div",st,[p(_,{to:`article/${e.type}?id=${e.id}`,custom:""},{default:f(({navigate:m})=>[t("button",{type:"button",class:"w-100 btn btn-outline-secondary",onClick:m}," 編輯",8,ot)]),_:2},1032,["to"]),t("button",{type:"button",class:"w-100 btn btn-outline-danger",onClick:m=>s.deleteArticle(e.id,e.title)}," 刪除",8,it)])])]))),128))])])])):(c(),r("div",nt,"還沒有任何文章！趕快新增一篇吧！"))],64)}const Lt=P(F,[["render",lt],["__scopeId","data-v-983c3c15"]]);export{Lt as default};
