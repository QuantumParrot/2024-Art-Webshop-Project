import{m as d,a as p}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{u}from"./userProduct-hXqBbad6.js";import{P as w,u as h}from"./ProductCard-Cwm-91S0.js";import{l as k}from"./alert-Dw2Xe9FX.js";import{m as y,w as b,l as g}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{_ as f}from"./index-Cbhzms45.js";import{A as i,Q as t,aJ as n,W as a,F as P,ao as S,z as c,c as v,aq as T}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as m}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./axios@1.6.7-Di5RpEPX.js";import"./userCart-B29TuF3F.js";import"./sweetalert2@11.10.5-Csd-Z1-j.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BEtXLgA-.js";import"./vue@3.4.19-C3VIO2t_.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DaNcwJXO.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";const x={components:{ProductCard:w},data(){return{totalProducts:[],keywordTemp:"",keyword:"",results:[]}},computed:{...d(u,["productList"]),...d(k,["isLoading"]),...d(h,["collection"])},watch:{"$route.query.keyword":{handler(s){this.keyword=s||"",this.search()},deep:!0},collection:{handler(){this.updateCollection()},deep:!0}},methods:{...p(u,["getProducts"]),...p(h,["getCollection","updateCollection"]),startSearch(){this.keywordTemp&&this.$router.push(`${this.$route.path}?keyword=${this.keywordTemp}`)},search(){this.keyword=this.keywordTemp,this.results=this.productList.filter(s=>s.title.match(this.keyword)||(s.tags||[]).some(o=>o.match(this.keyword))||(s.keywords||[]).includes(this.keyword))},reset(){this.keyword="",this.keywordTemp="",this.results.length=0}},created(){this.keywordTemp=this.$route.query.keyword||""},async mounted(){if(this.productList.length)this.totalProducts=this.productList;else{const s=await this.getProducts();this.totalProducts=s}this.search(),this.getCollection()},unmounted(){this.reset()}},C={class:"h-100 bg-gray text-primary"},L={class:"container py-7"},V={class:"py-5 mb-7"},q=t("h2",{class:"text-center mb-7"},[t("b",null,"商品搜尋")],-1),B={class:"row justify-content-center mb-7"},N={class:"col-md-6"},A={class:"input-group"},D=["disabled"],F=t("i",{class:"bi bi-search"},null,-1),K=[F],j={class:"mb-5"},z={key:0,class:"row list-unstyled g-6"},E={key:1,class:"alert bg-light py-5 mb-0"},J={class:"text-center mb-0"};function M(s,o,Q,U,e,l){const _=T("ProductCard");return c(),i("div",C,[t("div",L,[n(t("div",V,[q,t("div",B,[t("div",N,[t("div",A,[n(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=r=>e.keywordTemp=r),placeholder:"輸入您想搜尋的關鍵字",onKeyup:o[1]||(o[1]=b((...r)=>l.startSearch&&l.startSearch(...r),["enter"]))},null,544),[[g,e.keywordTemp]]),t("button",{type:"button",class:"btn btn-primary",disabled:!e.keywordTemp,onClick:o[2]||(o[2]=(...r)=>l.startSearch&&l.startSearch(...r))},K,8,D)])])]),n(t("p",j,[a(" 您搜尋的關鍵字為："),t("b",null,m(e.keyword),1),a("，共有 "),t("b",null,m(e.results.length),1),a(" 項商品 ")],512),[[y,e.keyword]]),e.results.length?(c(),i("ul",z,[(c(!0),i(P,null,S(e.results,r=>(c(),i("li",{key:r.id,class:"col-xl-4 col-md-6"},[v(_,{product:r},null,8,["product"])]))),128))])):(c(),i("div",E,[t("p",J,m(e.keyword?"找不到您要的結果":"請輸入關鍵字"),1)]))],512),[[y,e.totalProducts.length]])])])}const ut=f(x,[["render",M]]);export{ut as default};
