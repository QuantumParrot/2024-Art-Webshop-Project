import{d as R,m as T,a as I}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{a as V}from"./axios@1.6.7-Di5RpEPX.js";import{l as B,a as N}from"./alert-8GdQBstY.js";import{P as z}from"./PaginationComponent-Csm-st-g.js";import{m as j}from"./modal-C9K-cvng.js";import{U as O}from"./UploadForm-DIVtnMSU.js";import{m as U,l as $}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{_ as E}from"./index-CdXMXJ_I.js";import{z as n,A as r,Q as t,c,aH as C,W as P,aJ as h,F as w,ao as k,P as A,aq as g,al as H,ak as W,O as J}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as _,n as u}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import{D as Q}from"./DeleteModal-A1OjKUZ3.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./sweetalert2@11.10.5-Csd-Z1-j.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BEtXLgA-.js";import"./vue@3.4.19-C3VIO2t_.js";import"./bootstrap@5.3.2_@popperjs_core@2.11.8-CaSxFkTE.js";import"./ClipboardComponent-6AgD6iC3.js";import"./clipboard@2.0.11-Bt85-y58.js";/* empty css                               *//* empty css                          */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./vue3-lottie@3.3.0_vue@3.4.19-B_fkVG75.js";import"./lottie-web@5.12.2-DrG9waUi.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DaNcwJXO.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";import"./aos@2.3.4-DSOO8Lb4.js";var G={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/2024-Art-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_SITE:S,VITE_APP_PATH:q}=G,b=B(),y=N(),L=R("adminProduct",{state:()=>({products:[],filter:"全部",currentPage:1}),getters:{categories:({products:o})=>{const e=[];return o.forEach(d=>{e.includes(d.category)||e.push(d.category)}),e},tagsList:({products:o})=>{const e={};return o.forEach(d=>{d.tags&&d.tags.forEach(a=>{e[a.length]||(e[a.length]=[]),e[a.length].includes(a)||e[a.length].push(a)})}),e},productsList:({products:o,filter:e})=>e==="全部"?o:o.filter(d=>d.category===e),totalPages:({productsList:o})=>Math.ceil(o.length/5),displaying:({productsList:o,currentPage:e})=>o.toSorted((a,s)=>a.price-s.price).filter((a,s)=>Math.floor(s/5)===e-1)},actions:{switchPage(o){this.currentPage=o},getProducts(){b.createLoader("get-products"),V.get(`${S}/api/${q}/admin/products/all`).then(o=>{const{products:e}=o.data;this.products=Object.values(e),this.totalPages===0&&this.switchFilter("全部"),this.currentPage>this.totalPages&&this.switchPage(1)}).catch(o=>y.errorAlert(o)).finally(()=>b.removeLoader("get-products"))},createProduct(o,e){b.createLoader("create-products"),V.post(`${S}/api/${q}/admin/product`,{data:o}).then(d=>{const{message:a}=d.data;y.toastAlert(a,"success"),e(),this.getProducts()}).catch(d=>y.errorAlert(d)).finally(()=>b.removeLoader("create-products"))},updateProduct(o,e){b.createLoader("update-products"),V.put(`${S}/api/${q}/admin/product/${o.id}`,{data:o}).then(d=>{y.toastAlert(d.data.message,"success"),e(),this.getProducts()}).catch(d=>y.errorAlert(d)).finally(()=>b.removeLoader("update-products"))},switchProductStatus(o){const e=o.is_enabled;b.createLoader("switch-product-status"),V.put(`${S}/api/${q}/admin/product/${o.id}`,{data:{...o,is_enabled:!o.is_enabled}}).then(()=>{y.toastAlert(`成功${e?"下架":"上架"}`,"success"),this.getProducts()}).catch(d=>y.errorAlert(d)).finally(()=>b.removeLoader("switch-product-status"))},deleteProduct(o,e){b.createLoader("delete-product"),V.delete(`${S}/api/${q}/admin/product/${o}`).then(()=>{y.toastAlert("我們懷念它 (´;ω;`)","success"),e(),this.getProducts()}).catch(d=>y.errorAlert(d)).finally(()=>b.removeLoader("delete-product"))},switchFilter(o){this.switchPage(1),this.filter=o}}}),K={components:{UploadForm:O},mixins:[j],props:["tempProduct"],data(){return{modal:"",title:"",tab:"content",product:{imagesUrl:[],tags:[]},uploadState:!1}},computed:{...T(L,["categories","tagsList"])},watch:{tempProduct(){this.updateData()}},methods:{...I(L,["createProduct","updateProduct"]),...I(N,["toastAlert"]),updateData(){this.product=this.tempProduct,this.title=this.tempProduct.title;const{imagesUrl:o,tags:e}=this.tempProduct;this.product.imagesUrl=Array.isArray(o)?[...o]:[],this.product.tags=Array.isArray(e)?[...e]:[],this.tab="content"},addNewImage(o){this.product.imageUrl?(this.product.imagesUrl=this.product.imagesUrl.filter(e=>e),this.product.imagesUrl.push(o)):this.product.imageUrl=o},confirmUpdate(){this.product.imagesUrl=this.product.imagesUrl.filter(o=>o),this.product.tags=this.product.tags.filter(o=>o),this.product.id?this.updateProduct(this.product,this.hideModal):this.createProduct(this.product,this.hideModal)},updateState(o){this.uploadState=o}},mounted(){this.updateData()}},i=o=>(H("data-v-89859a0e"),o=o(),W(),o),X={class:"modal modal-lg fade",tabindex:"-1",ref:"modal"},Y={class:"modal-dialog modal-dialog-centered"},Z={class:"modal-content"},tt={class:"modal-header"},et={class:"mb-0"},st=i(()=>t("i",{class:"bi bi-x-circle-fill"},null,-1)),ot=[st],lt={class:"modal-body"},it={class:"alert bg-gray"},nt=i(()=>t("p",null,[t("i",{class:"bi bi-flag-fill text-highlight me-2"}),t("span",null,"欄位完成度")],-1)),rt={class:"row gy-2 flex-md-row flex-column fw-bold"},dt={class:"col"},ct={class:"row"},at={class:"col"},ut=i(()=>t("span",null,"名稱",-1)),pt={class:"col"},mt=i(()=>t("span",null,"別名",-1)),_t={class:"col"},ht=i(()=>t("span",null,"規格",-1)),bt={class:"col"},gt={class:"row"},ft={class:"col"},vt=i(()=>t("span",null,"分類",-1)),yt={class:"col"},wt=i(()=>t("span",null,"單位",-1)),Pt={class:"col"},kt=i(()=>t("span",null,"介紹",-1)),Ut={class:"col"},xt={class:"row"},Mt={class:"col"},Vt=i(()=>t("span",null,"原價",-1)),St={class:"col"},qt=i(()=>t("span",null,"售價",-1)),Ct={class:"col"},At=i(()=>t("span",null,"主圖",-1)),Lt={class:"nav nav-pills flex-nowrap text-nowrap overflow-x-scroll bg-gray rounded-2 mb-3"},Ft={class:"nav-item flex-grow-1"},Dt=i(()=>t("span",{class:"d-sm-inline d-none"},"商品",-1)),$t={class:"nav-item flex-grow-1"},It=i(()=>t("span",{class:"d-sm-inline d-none"},"商品",-1)),Et={class:"nav-item flex-grow-1"},Tt=i(()=>t("span",{class:"d-sm-inline d-none"},"商品",-1)),Nt={class:"nav-item flex-grow-1"},jt=i(()=>t("span",{class:"d-sm-inline d-none"},"商品",-1)),Ot={class:"nav-item flex-grow-1"},Rt=i(()=>t("span",{class:"d-sm-inline d-none"},"商品",-1)),Bt={class:"alert border rounded-2"},zt={class:"mb-3"},Ht=i(()=>t("label",{class:"form-label is-required",for:"title"},"商品名稱",-1)),Wt={class:"mb-3"},Jt=i(()=>t("label",{class:"form-label is-required",for:"subtitle"},"英文別名",-1)),Qt={class:"mb-3"},Gt=i(()=>t("label",{class:"form-label is-required",for:"content"},"商品規格",-1)),Kt=i(()=>t("p",{class:"fs-7 text-muted mb-3"},"商品的材質、尺寸、重量⋯⋯等等",-1)),Xt={class:"row row-cols-2"},Yt={class:"col"},Zt=i(()=>t("label",{class:"form-label is-required",for:"category"}," 商品分類",-1)),te={id:"categories"},ee=["value"],se={class:"col"},oe=i(()=>t("label",{class:"form-label is-required",for:"unit"},"商品單位",-1)),le={class:"mb-3"},ie=i(()=>t("label",{class:"form-label mb-3 is-required",for:"description"}," 商品介紹",-1)),ne=i(()=>t("label",{class:"form-label mb-3",for:"notes"},"商品備註",-1)),re={class:"mb-3"},de=i(()=>t("div",{class:"flex-classic mb-2"},[t("label",{class:"is-required",for:"origin_price"},"商品原價"),t("span",{class:"fs-7 text-danger"}," 必須是大於零的整數 ")],-1)),ce={class:"mb-0"},ae=i(()=>t("div",{class:"flex-classic mb-2"},[t("label",{class:"is-required",for:"price"},"商品售價"),t("span",{class:"fs-7 text-danger"}," 必須是大於零的整數 ")],-1)),ue={class:"mb-3"},pe=i(()=>t("p",null,"商品標籤",-1)),me={class:"row g-3 mb-3"},_e=["onUpdate:modelValue"],he=["onClick"],be=i(()=>t("i",{class:"bi bi-x-lg"},null,-1)),ge=[be],fe=i(()=>t("p",null,"點擊新增使用過的標籤：",-1)),ve={class:"d-flex flex-column gap-3"},ye={class:"d-flex gap-2 flex-wrap mt-3"},we=["onClick"],Pe={class:"tag badge p-2 rounded-1 fs-6"},ke={class:"d-flex align-items-center gap-3 mb-3"},Ue=["href"],xe=["src","alt"],Me=["href"],Ve=["src","alt"],Se={class:"mb-3"},qe=i(()=>t("h5",{class:"fw-bold mb-3"},"圖片設定",-1)),Ce=i(()=>t("label",{class:"form-label is-required",for:"imageUrl"},"主圖網址",-1)),Ae={class:"position-relative"},Le=i(()=>t("i",{class:"bi bi-x-lg"},null,-1)),Fe=[Le],De={key:0},$e=i(()=>t("p",null,"副圖網址",-1)),Ie={class:"row g-3"},Ee=["onUpdate:modelValue"],Te=["onClick"],Ne=i(()=>t("i",{class:"bi bi-x-lg"},null,-1)),je=[Ne],Oe={class:"p-3 border rounded-2 mt-3"},Re=i(()=>t("h5",{class:"fw-bold mb-3"},"上傳圖片",-1)),Be={class:"modal-footer"},ze=["disabled"];function He(o,e,d,a,s,f){const x=g("LoadingOverlay"),p=g("VField"),F=g("UploadForm"),D=g("VForm");return n(),r("div",X,[t("div",Y,[c(x,{isLoading:s.uploadState,isFull:!1},null,8,["isLoading"]),t("div",Z,[t("div",tt,[t("h4",et,_(s.title?s.title:"新增商品"),1),t("button",{type:"button",class:"btn border-0 p-0 fs-4",onClick:e[0]||(e[0]=(...M)=>o.hideModal&&o.hideModal(...M))},ot)]),c(D,{onSubmit:f.confirmUpdate,ref:"form"},{default:C(({meta:M})=>[t("div",lt,[t("div",it,[nt,t("div",rt,[t("div",dt,[t("div",ct,[t("div",at,[t("i",{class:u(["bi me-2",s.product.title?"bi-check-square text-success":"bi-square"])},null,2),ut]),t("div",pt,[t("i",{class:u(["bi me-2",s.product.subtitle?"bi-check-square text-success":"bi-square"])},null,2),mt]),t("div",_t,[t("i",{class:u(["bi me-2",s.product.content?"bi-check-square text-success":"bi-square"])},null,2),ht])])]),t("div",bt,[t("div",gt,[t("div",ft,[t("i",{class:u(["bi me-2",s.product.category?"bi-check-square text-success":"bi-square"])},null,2),vt]),t("div",yt,[t("i",{class:u(["bi me-2",s.product.unit?"bi-check-square text-success":"bi-square"])},null,2),wt]),t("div",Pt,[t("i",{class:u(["bi me-2",s.product.description?"bi-check-square text-success":"bi-square"])},null,2),kt])])]),t("div",Ut,[t("div",xt,[t("div",Mt,[t("i",{class:u(["bi me-2",s.product.origin_price?"bi-check-square text-success":"bi-square"])},null,2),Vt]),t("div",St,[t("i",{class:u(["bi me-2",s.product.price?"bi-check-square text-success":"bi-square"])},null,2),qt]),t("div",Ct,[t("i",{class:u(["bi me-2",s.product.imageUrl?"bi-check-square text-success":"bi-square"])},null,2),At])])])])]),t("ul",Lt,[t("li",Ft,[t("button",{type:"button",onClick:e[1]||(e[1]=l=>s.tab="content"),class:u(["w-100 nav-link",{active:s.tab==="content"}])},[Dt,P("內容 ")],2)]),t("li",$t,[t("button",{type:"button",onClick:e[2]||(e[2]=l=>s.tab="description"),class:u(["w-100 nav-link",{active:s.tab==="description"}])},[It,P("介紹 ")],2)]),t("li",Et,[t("button",{type:"button",onClick:e[3]||(e[3]=l=>s.tab="price"),class:u(["w-100 nav-link",{active:s.tab==="price"}])},[Tt,P("售價 ")],2)]),t("li",Nt,[t("button",{type:"button",onClick:e[4]||(e[4]=l=>s.tab="tags"),class:u(["w-100 nav-link",{active:s.tab==="tags"}])},[jt,P("標籤 ")],2)]),t("li",Ot,[t("button",{type:"button",onClick:e[5]||(e[5]=l=>s.tab="image"),class:u(["w-100 nav-link",{active:s.tab==="image"}])},[Rt,P("圖片 ")],2)])]),t("div",Bt,[h(t("div",null,[t("div",zt,[Ht,c(p,{type:"text",id:"title",class:"form-control",modelValue:s.product.title,"onUpdate:modelValue":e[6]||(e[6]=l=>s.product.title=l),modelModifiers:{trim:!0},name:"title",rules:"required"},null,8,["modelValue"])]),t("div",Wt,[Jt,c(p,{type:"text",id:"subtitle",class:"form-control",modelValue:s.product.subtitle,"onUpdate:modelValue":e[7]||(e[7]=l=>s.product.subtitle=l),modelModifiers:{trim:!0},name:"subtitle",rules:"required"},null,8,["modelValue"])]),t("div",Qt,[Gt,Kt,c(p,{type:"text",id:"content",class:"form-control",modelValue:s.product.content,"onUpdate:modelValue":e[8]||(e[8]=l=>s.product.content=l),modelModifiers:{trim:!0},name:"content",rules:"required"},null,8,["modelValue"])]),t("div",Xt,[t("div",Yt,[Zt,c(p,{type:"text",id:"category",list:"categories",class:"form-control",modelValue:s.product.category,"onUpdate:modelValue":e[9]||(e[9]=l=>s.product.category=l),modelModifiers:{trim:!0},name:"category",rules:"required"},null,8,["modelValue"]),t("datalist",te,[(n(!0),r(w,null,k(o.categories,l=>(n(),r("option",{key:l,value:l},_(l),9,ee))),128))])]),t("div",se,[oe,c(p,{type:"text",id:"unit",class:"form-control",modelValue:s.product.unit,"onUpdate:modelValue":e[10]||(e[10]=l=>s.product.unit=l),modelModifiers:{trim:!0},name:"unit",rules:"required"},null,8,["modelValue"])])])],512),[[U,s.tab==="content"]]),h(t("div",null,[t("div",le,[ie,c(p,{id:"description",rows:"10",class:"form-control text-justify",modelValue:s.product.description,"onUpdate:modelValue":e[11]||(e[11]=l=>s.product.description=l),modelModifiers:{trim:!0},name:"description",rules:"required",as:"textarea"},null,8,["modelValue"])]),ne,h(t("textarea",{id:"notes",rows:"3",class:"form-control text-justify","onUpdate:modelValue":e[12]||(e[12]=l=>s.product.notes=l),placeholder:"需要讓消費者知道的購買須知"},`
                            `,512),[[$,s.product.notes,void 0,{trim:!0}]])],512),[[U,s.tab==="description"]]),h(t("div",null,[t("div",re,[de,c(p,{id:"origin_price",type:"number",min:"1",class:"form-control",modelValue:s.product.origin_price,"onUpdate:modelValue":e[13]||(e[13]=l=>s.product.origin_price=l),modelModifiers:{number:!0},name:"origin_price",rules:"required|integer|min_value:1"},null,8,["modelValue"])]),t("div",ce,[ae,c(p,{id:"price",type:"number",min:"1",class:"form-control",modelValue:s.product.price,"onUpdate:modelValue":e[14]||(e[14]=l=>s.product.price=l),modelModifiers:{number:!0},name:"price",rules:"required|integer|min_value:1"},null,8,["modelValue"])])],512),[[U,s.tab==="price"]]),h(t("div",null,[t("div",ue,[pe,t("div",me,[(n(!0),r(w,null,k(s.product.tags,(l,m)=>(n(),r("div",{key:l,class:"col-lg-3 col-md-4 position-relative"},[h(t("input",{type:"text",class:"form-control","onUpdate:modelValue":v=>s.product.tags[m]=v},null,8,_e),[[$,s.product.tags[m]]]),t("button",{type:"button",class:"btn btn-origin btn-inline",onClick:v=>s.product.tags.splice(m,1)},ge,8,he)]))),128))]),t("button",{type:"button",class:"btn btn-primary",onClick:e[15]||(e[15]=l=>s.product.tags.push(""))}," 新增標籤")]),fe,t("div",ve,[(n(!0),r(w,null,k(o.tagsList,(l,m)=>(n(),r("details",{key:m,open:""},[t("summary",null,[t("b",null,_(m)+" 個字",1)]),t("div",ye,[(n(!0),r(w,null,k(l,v=>(n(),r("button",{key:v,type:"button",class:"btn btn-origin",onClick:Ns=>s.product.tags.push(v)},[t("span",Pe,_(v),1)],8,we))),128))])]))),128))])],512),[[U,s.tab==="tags"]]),h(t("div",null,[t("div",ke,[t("a",{target:"_blank",href:s.product.imageUrl},[s.product.imageUrl?(n(),r("img",{key:0,src:s.product.imageUrl,alt:s.product.title,height:"150",class:"product-img"},null,8,xe)):A("",!0)],8,Ue),(n(!0),r(w,null,k(s.product.imagesUrl,l=>(n(),r("a",{key:l,target:"_blank",href:l},[l?(n(),r("img",{key:0,src:l,alt:s.product.title,height:"150",class:"product-img"},null,8,Ve)):A("",!0)],8,Me))),128))]),t("div",Se,[qe,Ce,t("div",Ae,[c(p,{id:"imageUrl",type:"text",class:"form-control pe-7 mb-3",modelValue:s.product.imageUrl,"onUpdate:modelValue":e[16]||(e[16]=l=>s.product.imageUrl=l),modelModifiers:{trim:!0},name:"imageUrl",rules:"required|url"},null,8,["modelValue"]),h(t("button",{type:"button",class:"btn btn-origin btn-inline",onClick:e[17]||(e[17]=l=>s.product.imageUrl="")},Fe,512),[[U,s.product.imageUrl]])])]),t("button",{type:"button",class:"btn btn-primary mb-3",onClick:e[18]||(e[18]=l=>s.product.imagesUrl.push(""))}," 新增圖片"),s.product.imagesUrl.length?(n(),r("div",De,[$e,t("div",Ie,[(n(!0),r(w,null,k(s.product.imagesUrl,(l,m)=>(n(),r("div",{key:l,class:"col-md-6 position-relative"},[h(t("input",{type:"text",class:"form-control pe-6","onUpdate:modelValue":v=>s.product.imagesUrl[m]=v},null,8,Ee),[[$,s.product.imagesUrl[m],void 0,{trim:!0}]]),t("button",{type:"button",class:"btn btn-origin btn-inline",onClick:v=>s.product.imagesUrl.splice(m,1)},je,8,Te)]))),128))])])):A("",!0)],512),[[U,s.tab==="image"]])]),h(t("div",Oe,[Re,c(F,{"use-clipboard":!1,"upload-state":s.uploadState,onAddNewImage:f.addNewImage,onUpdateUploadState:f.updateState},null,8,["upload-state","onAddNewImage","onUpdateUploadState"])],512),[[U,s.tab==="image"]])]),t("div",Be,[t("button",{type:"submit",class:"btn btn-primary",disabled:!M.valid}," 確認更新",8,ze),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[19]||(e[19]=(...l)=>o.hideModal&&o.hideModal(...l))}," 取消")])]),_:1},8,["onSubmit"])])])],512)}const We=E(K,[["render",He],["__scopeId","data-v-89859a0e"]]),Je={components:{UploadForm:O},mixins:[j],data(){return{modal:"",uploadState:!1}},methods:{updateState(o){this.uploadState=o}}},Qe={class:"modal fade",tabindex:"-1",ref:"modal"},Ge={class:"modal-dialog modal-dialog-centered"},Ke={class:"modal-content"},Xe={class:"modal-header"},Ye=t("h4",{class:"mb-0"},"上傳圖片",-1),Ze=["disabled"],ts=t("i",{class:"bi bi-x-circle-fill"},null,-1),es=[ts],ss={class:"modal-body"};function os(o,e,d,a,s,f){const x=g("UploadForm");return n(),r("div",Qe,[t("div",Ge,[t("div",Ke,[t("div",Xe,[Ye,t("button",{type:"button",class:"btn border-0 p-0 fs-4",disabled:s.uploadState,onClick:e[0]||(e[0]=(...p)=>o.hideModal&&o.hideModal(...p))},es,8,Ze)]),t("div",ss,[c(x,{"use-clipboard":!0,"upload-state":s.uploadState,onUpdateUploadState:f.updateState},null,8,["upload-state","onUpdateUploadState"])])])])],512)}const ls=E(Je,[["render",os]]),is={components:{PaginationComponent:z,AdminProductModal:We,UploadModal:ls,DeleteModal:Q},data(){return{tempProduct:{}}},computed:{...T(L,["products","productsList","categories","filter","displaying","currentPage","totalPages"])},methods:{...I(L,["switchPage","switchFilter","getProducts","switchProductStatus","deleteProduct"]),openModal(o,e){this.tempProduct=o?{...o}:{is_enabled:!1},e==="delete"?this.$refs.deleteModal.showModal():this.$refs.productModal.showModal()}},created(){this.products.length||this.getProducts()}},ns={class:"lh-lg text-end mb-6"},rs=t("h3",{class:"fs-2 mb-3"},"PRODUCTS｜商品",-1),ds={class:"text-muted"},cs={class:"row justify-content-between gx-3 gy-3 gy-lg-0 mb-4"},as={class:"col-xl-4 col-lg-5"},us={class:"h-100 alert bg-gray flex-classic mb-0"},ps=t("i",{class:"bi bi-plus-lg me-1"},null,-1),ms=t("i",{class:"bi bi-upload me-1"},null,-1),_s={class:"col-xl-8 col-lg-7"},hs={class:"w-100 h-100 alert bg-gray mb-0 d-flex align-items-center justify-content-end"},bs={class:"d-flex justify-content-end mb-4"},gs=["value"],fs=t("option",{value:"全部"},"全部",-1),vs=["value"],ys={key:0,class:"table-responsive"},ws={class:"table table-hover text-nowrap"},Ps=t("thead",null,[t("tr",null,[t("th",{scope:"col",width:"10%",class:"d-none d-md-table-cell"},"分類"),t("th",{scope:"col",width:"45%"},"名稱"),t("th",{scope:"col",width:"10%",class:"text-end"},"原價"),t("th",{scope:"col",width:"10%",class:"text-end"},"售價"),t("th",{scope:"col",width:"10%",class:"text-center"},"狀態"),t("th",{scope:"col",width:"15%",class:"text-center"},"管理")])],-1),ks={class:"align-middle"},Us={class:"d-none d-md-table-cell"},xs={class:"badge bg-highlight text-dark py-2"},Ms=t("i",{class:"bi bi-box-arrow-up-right"},null,-1),Vs={class:"text-end"},Ss={class:"text-end"},qs={class:"text-center"},Cs={class:"form-switch"},As=["checked","onChange"],Ls={class:"text-center"},Fs={class:"d-flex flex-column gap-2"},Ds=["onClick"],$s=["onClick"],Is={key:1,class:"alert bg-gray"},Es=["src","alt"];function Ts(o,e,d,a,s,f){const x=g("PaginationComponent"),p=g("RouterLink"),F=g("UploadModal"),D=g("AdminProductModal"),M=g("DeleteModal");return n(),r(w,null,[t("div",ns,[rs,t("p",ds,[t("span",null,"目前共有 "+_(o.products.length)+" 項商品，",1),t("span",null,_(o.products.filter(l=>l.is_enabled).length)+" 項上架中",1)])]),t("div",cs,[t("div",as,[t("div",us,[t("button",{type:"button",class:"w-100 btn btn-primary me-3",onClick:e[0]||(e[0]=l=>f.openModal())},[ps,P(" 新增商品")]),t("button",{type:"button",class:"w-100 btn btn-primary",onClick:e[1]||(e[1]=(...l)=>o.$refs.uploadModal.showModal&&o.$refs.uploadModal.showModal(...l))},[ms,P(" 上傳圖片")])])]),t("div",_s,[t("div",hs,[c(x,{total:o.totalPages,current:o.currentPage,"scroll-to-top":!1,onSwitchPage:o.switchPage},null,8,["total","current","onSwitchPage"])])])]),t("div",bs,[t("div",null,[t("select",{class:"form-select",value:o.filter,onChange:e[2]||(e[2]=l=>o.switchFilter(l.target.value))},[fs,(n(!0),r(w,null,k(o.categories,l=>(n(),r("option",{key:l,value:l},_(l),9,vs))),128))],40,gs)])]),o.products.length?(n(),r("div",ys,[t("table",ws,[Ps,t("tbody",ks,[(n(!0),r(w,null,k(o.displaying,l=>(n(),r("tr",{key:l.id},[t("td",Us,[t("span",xs,_(l.category),1)]),t("td",null,[l.is_enabled?(n(),J(p,{key:0,class:"text-info me-3",target:"_blank",to:`/product/${l.id}`},{default:C(()=>[Ms]),_:2},1032,["to"])):A("",!0),t("span",null,_(l.title),1)]),t("td",Vs,"$ "+_(l.origin_price),1),t("td",Ss,"$ "+_(l.price),1),t("td",qs,[t("div",Cs,[t("input",{type:"checkbox",role:"switch",class:"form-check-input",checked:l.is_enabled,onChange:m=>o.switchProductStatus(l)},null,40,As)])]),t("td",Ls,[t("div",Fs,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:m=>f.openModal(l,"update")}," 編輯",8,Ds),t("button",{type:"button",class:"btn btn-outline-danger",onClick:m=>f.openModal(l,"delete")}," 刪除",8,$s)])])]))),128))])])])):(n(),r("div",Is,"還沒有任何商品！趕快建立一個吧！")),c(F,{ref:"uploadModal"},null,512),c(D,{ref:"productModal","temp-product":s.tempProduct},null,8,["temp-product"]),c(M,{ref:"deleteModal",onDeleteTarget:e[3]||(e[3]=l=>o.deleteProduct(s.tempProduct.id,this.$refs.deleteModal.hideModal))},{title:C(()=>[P("確定刪除商品？")]),alert:C(()=>[P("這個操作無法復原喔！你要確定欸！(ﾟдﾟ≡ﾟдﾟ)")]),itemDetail:C(()=>[t("img",{class:"img-zoom-out mb-4",src:s.tempProduct.imageUrl,alt:s.tempProduct.title},null,8,Es)]),_:1},512)],64)}const fo=E(is,[["render",Ts]]);export{fo as default};
