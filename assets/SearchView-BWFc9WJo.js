import{m as d,a as u}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{u as m}from"./userProduct-SnhvK8UC.js";import{P as _,u as p}from"./ProductCard-CkLfWMhX.js";import{l as k}from"./alert-FxGjjVMx.js";import{m as y,w as f,l as b}from"./@vue_runtime-dom@3.4.19-BGeaY8D6.js";import{_ as g}from"./index-eQ3mQE3r.js";import{A as i,Q as t,aJ as a,W as n,F as C,ao as P,z as c,c as S,aq as v}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as h}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./axios@1.6.7-Di5RpEPX.js";import"./userCart-C8xJhx1c.js";import"./sweetalert2@11.10.5-Bw9zh6VB.js";import"./@ckeditor_ckeditor5-vue@5.1.0-CfTehzvT.js";import"./vue@3.4.19-B_XG1K6M.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-CVoitIQD.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";const x={components:{ProductCard:_},data(){return{totalProducts:[],keyword:"",keywordCache:"",results:[]}},computed:{...d(m,["productList"]),...d(k,["isLoading"]),...d(p,["collection"])},watch:{"$route.query.keyword":{handler(s){s&&(this.keyword=s,this.search())},deep:!0},collection:{handler(){this.updateCollection()},deep:!0}},methods:{...u(m,["getProducts"]),...u(p,["getCollection","updateCollection"]),startSearch(){this.keyword&&this.$router.push(`/search?keyword=${this.keyword}`)},search(){this.keywordCache=this.keyword,this.results=this.productList.filter(s=>s.title.match(this.keyword)||(s.tags||[]).some(o=>o.match(this.keyword))||(s.keywords||[]).includes(this.keyword))},reset(){this.keyword="",this.keywordCache="",this.results=[]}},async mounted(){if(this.productList.length)this.totalProducts=this.productList;else{const s=await this.getProducts();this.totalProducts=s}this.keyword=this.$route.query.keyword||"",this.keyword&&(this.search(),this.getCollection())},unmounted(){this.reset()}},L={class:"h-100 bg-gray text-primary"},V={class:"container py-7"},q={class:"py-5 mb-7"},B=t("h2",{class:"text-center mb-7"},[t("b",null,"商品搜尋")],-1),N={class:"row justify-content-center mb-7"},A={class:"col-md-6"},D={class:"input-group"},F=["disabled"],K=t("i",{class:"bi bi-search"},null,-1),T=[K],j={class:"mb-5"},z={key:0,class:"row list-unstyled g-6"},E={key:1,class:"alert bg-light py-5 mb-0"},J={class:"text-center mb-0"};function M(s,o,Q,U,e,l){const w=v("ProductCard");return c(),i("div",L,[t("div",V,[a(t("div",q,[B,t("div",N,[t("div",A,[t("div",D,[a(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=r=>e.keyword=r),placeholder:"輸入您想搜尋的關鍵字",onKeyup:o[1]||(o[1]=f((...r)=>l.startSearch&&l.startSearch(...r),["enter"]))},null,544),[[b,e.keyword]]),t("button",{type:"button",class:"btn btn-primary",disabled:!e.keyword,onClick:o[2]||(o[2]=(...r)=>l.startSearch&&l.startSearch(...r))},T,8,F)])])]),a(t("p",j,[n(" 您搜尋的關鍵字為："),t("b",null,h(e.keywordCache),1),n("，共有 "),t("b",null,h(e.results.length),1),n(" 項商品 ")],512),[[y,e.keywordCache]]),e.results.length?(c(),i("ul",z,[(c(!0),i(C,null,P(e.results,r=>(c(),i("li",{key:r.id,class:"col-xl-4 col-md-6"},[S(w,{product:r},null,8,["product"])]))),128))])):(c(),i("div",E,[t("p",J,h(e.keyword?"找不到您要的結果":"請輸入關鍵字"),1)]))],512),[[y,e.totalProducts.length]])])])}const mt=g(x,[["render",M]]);export{mt as default};
