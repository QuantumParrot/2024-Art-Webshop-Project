import{d as p,m as d,a as r}from"./pinia@2.1.7_vue@3.4.19-CHKlOEZr.js";import{c as m}from"./userCart-BE0r8f0t.js";import{a as f,l as g}from"./alert-dm0RMdUk.js";import{_ as b}from"./index-8FgK9nF8.js";import{aj as c,O as l,P as t,c as v,aH as C,F as S,N as y,aq as k,al as w,ak as x}from"./@vue_runtime-core@3.4.19-CGfIweqO.js";import{P as n,n as I}from"./@vue_shared@3.4.19-Bk7MlA8B.js";const i=f(),u=p("userCollection",{state:()=>({collection:[]}),actions:{getCollection(){this.collection=JSON.parse(localStorage.getItem("collection"))||[]},toggleCollection(e){const s=this.collection.findIndex(o=>o===e);s===-1?(this.collection.push(e),i.toastAlert("已加入收藏","success")):(this.collection.splice(s,1),i.toastAlert("已移除收藏","success"))},updateCollection(){this.collection.length?localStorage.setItem("collection",JSON.stringify(this.collection)):localStorage.removeItem("collection")},clearCollection(){const e={title:"確定清空所有收藏嗎？"};i.checkAlert(e,()=>{this.collection.length=0,i.toastAlert("我們懷念它 (´・ω・`)","success")})}}}),N={props:["product"],computed:{...d(g,["loadingTask"]),...d(u,["collection"])},methods:{...r(m,["addToCart"]),...r(u,["toggleCollection"])}},a=e=>(w("data-v-8151961f"),e=e(),x(),e),T={class:"h-100 card border-0 rounded-0 shadow"},A={class:"overflow-hidden"},P={class:"card-img"},B=["src","alt"],O=a(()=>t("div",{class:"card-navigate"},[t("button",{type:"button",class:"btn fs-4 text-light"},[t("i",{class:"bi bi-search"})])],-1)),V={class:"card-body py-5 row"},j={class:"col-9"},F={class:"h-100 d-flex flex-column justify-content-between"},J={class:"flex-grow-1 d-flex gap-3 mb-3"},q={class:"fs-5 fw-bold text-primary text-nowrap overflow-scroll mb-0"},z={class:"fs-6"},D=a(()=>t("span",null,"NT＄",-1)),E={class:"text-decoration-line-through text-muted"},H=a(()=>t("span",{class:"arrow-animation"},[t("span",{class:"arrow"}," → ")],-1)),L={class:"fw-bold"},U={class:"col-3"},G={class:"d-flex flex-column align-items-end"},K=["disabled"],M={key:0,role:"status",class:"spinner-border spinner-border-sm"},Q=a(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),R=[Q],W={key:1,class:"bi bi-cart-plus-fill"};function X(e,s,o,Y,Z,$){const _=k("router-link");return c(),l("div",T,[t("div",A,[t("div",P,[v(_,{to:`/product/${o.product.id}`},{default:C(()=>[t("img",{class:"card-img-top",src:o.product.imageUrl,alt:o.product.title},null,8,B),O]),_:1},8,["to"])])]),t("div",V,[t("div",j,[t("div",F,[t("div",J,[t("h4",q,n(o.product.title),1)]),t("div",z,[D,o.product.price<o.product.origin_price?(c(),l(S,{key:0},[t("span",null,[t("span",E,n(o.product.origin_price),1)]),H],64)):y("",!0),t("span",L,n(o.product.price),1)])])]),t("div",U,[t("div",G,[t("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=h=>e.addToCart(o.product.id)),disabled:e.loadingTask===o.product.id},[e.loadingTask===o.product.id?(c(),l("div",M,R)):(c(),l("i",W))],8,K),t("button",{type:"button",class:"btn btn-outline-primary",onClick:s[1]||(s[1]=h=>e.toggleCollection(o.product.id))},[t("i",{class:I(["bi",e.collection.includes(o.product.id)?"bi-heart-fill":"bi-heart"])},null,2)])])])])])}const it=b(N,[["render",X],["__scopeId","data-v-8151961f"]]);export{it as P,u};
