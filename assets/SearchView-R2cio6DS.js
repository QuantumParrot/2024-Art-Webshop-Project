import{m,a as y}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{u as p}from"./userProduct-DvVBjULb.js";import{l as _}from"./alert-8GdQBstY.js";import{P as w}from"./ProductCard-t3QPPVh_.js";import{m as h,w as k,l as b}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{_ as f}from"./index-9uxRtpDi.js";import{A as i,Q as t,aJ as a,W as l,F as g,ao as v,z as d,c as P,aq as S}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as n}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./axios@1.6.7-Di5RpEPX.js";import"./sweetalert2@11.10.5-Csd-Z1-j.js";import"./@ckeditor_ckeditor5-vue@5.1.0-BEtXLgA-.js";import"./vue@3.4.19-C3VIO2t_.js";import"./userCart-x-FpTMdM.js";/* empty css                               *//* empty css                          */import"./vee-validate@4.12.5_vue@3.4.19-BmIHdE2I.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-DqtB_02U.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./vue3-lottie@3.3.0_vue@3.4.19-B_fkVG75.js";import"./lottie-web@5.12.2-DrG9waUi.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DaNcwJXO.js";import"./vue-router@4.2.5_vue@3.4.19-BBAnl9m5.js";import"./aos@2.3.4-DSOO8Lb4.js";const T={components:{ProductCard:w},data(){return{totalProducts:[],keywordTemp:"",keyword:"",results:[]}},computed:{...m(p,["productList"]),...m(_,["isLoading"])},watch:{"$route.query.keyword":{handler(s){this.keyword=s||"",this.search()},deep:!0}},methods:{...y(p,["getProducts"]),startSearch(){this.$router.push(`${this.$route.path}?keyword=${this.keywordTemp}`)},search(){this.keywordTemp&&(this.keyword=this.keywordTemp,this.results=this.productList.filter(s=>s.title.match(this.keyword)||s.tags.some(r=>r.match(this.keyword))))},reset(){this.keyword="",this.keywordTemp="",this.results.length=0}},created(){this.keywordTemp=this.$route.query.keyword||""},async mounted(){if(this.productList.length)this.totalProducts=this.productList;else{const s=await this.getProducts();this.totalProducts=s}this.search()},unmounted(){this.reset()}},x={class:"h-100 bg-gray text-primary"},L={class:"container py-7"},C={class:"py-5 mb-7"},V=t("h2",{class:"text-center mb-7"},[t("b",null,"商品搜尋")],-1),q={class:"row justify-content-center mb-7"},B={class:"col-md-6"},N={class:"input-group"},A=["disabled"],D=t("i",{class:"bi bi-search"},null,-1),F=[D],K={class:"mb-5"},j={key:0,class:"row list-unstyled g-6"},z={key:1,class:"alert bg-light py-5 mb-0"},E={class:"text-center mb-0"};function J(s,r,M,Q,e,c){const u=S("ProductCard");return d(),i("div",x,[t("div",L,[a(t("div",C,[V,t("div",q,[t("div",B,[t("div",N,[a(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=o=>e.keywordTemp=o),placeholder:"輸入您想搜尋的關鍵字",onKeyup:r[1]||(r[1]=k((...o)=>c.startSearch&&c.startSearch(...o),["enter"]))},null,544),[[b,e.keywordTemp]]),t("button",{type:"button",class:"btn btn-primary",disabled:!e.keywordTemp,onClick:r[2]||(r[2]=(...o)=>c.startSearch&&c.startSearch(...o))},F,8,A)])])]),a(t("p",K,[l(" 您搜尋的關鍵字為："),t("b",null,n(e.keyword),1),l("，共有 "),t("b",null,n(e.results.length),1),l(" 項商品 ")],512),[[h,e.keyword]]),e.results.length?(d(),i("ul",j,[(d(!0),i(g,null,v(e.results,o=>(d(),i("li",{key:o.id,class:"col-xl-4 col-md-6"},[P(u,{product:o},null,8,["product"])]))),128))])):(d(),i("div",z,[t("p",E,n(e.keyword?"找不到您要的結果":"請輸入關鍵字"),1)]))],512),[[h,!s.isLoading]])])])}const _t=f(T,[["render",J]]);export{_t as default};
