import{d as p,m,a as u}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{c as g}from"./userCart-B29TuF3F.js";import{a as f,l as b}from"./alert-Dw2Xe9FX.js";import{_ as v}from"./index-xuGDw2X7.js";import{z as l,A as c,Q as t,c as C,aH as y,P as _,F as S,aq as k,al as w,ak as x}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as n,n as I}from"./@vue_shared@3.4.19-Bk7MlA8B.js";const a=f(),L=p("userCollection",{state:()=>({collection:[]}),actions:{getCollection(){this.collection=JSON.parse(localStorage.getItem("collection"))||[]},isCollection(o){return this.collection.includes(o)},toggleCollection(o){const e=this.collection.findIndex(s=>s===o);e===-1?(this.collection.push(o),a.toastAlert("已加入收藏","success")):(this.collection.splice(e,1),a.toastAlert("已移除收藏","success"))},updateCollection(){this.collection.length?localStorage.setItem("collection",JSON.stringify(this.collection)):localStorage.removeItem("collection")},clearCollection(){const o={title:"確定清空所有收藏嗎？"};a.checkAlert(o,()=>{this.collection.length=0,a.toastAlert("我們懷念它 (´・ω・`)","success")})}}}),A={props:["product"],data(){return{imageLoading:!0}},computed:{...m(b,["loadingTask"])},methods:{...u(g,["addToCart"]),...u(L,["toggleCollection","isCollection"])}},i=o=>(w("data-v-e1c7b566"),o=o(),x(),o),N={class:"h-100 card border-0 overflow-hidden"},T={class:"overflow-hidden"},P={class:"card-img overflow-hidden"},z=["src","alt"],B=i(()=>t("div",{class:"card-navigate"},[t("button",{type:"button",class:"btn fs-4 text-light"},[t("i",{class:"bi bi-search"})])],-1)),V={key:0,class:"card-loading"},F=i(()=>t("div",{role:"status",class:"spinner-border spinner-border"},[t("span",{class:"visually-hidden"},"Loading...")],-1)),J=[F],O={class:"card-body py-5"},R={class:"mb-5"},j={class:"h-100 d-flex flex-column justify-content-between"},q={class:"flex-grow-1 d-flex gap-3 mb-3"},D={class:"fs-5 fw-bold text-primary overflow-scroll mb-0 text-nowrap"},E={class:"fs-6 text-start"},H=i(()=>t("span",null,"NT＄",-1)),Q={class:"text-decoration-line-through text-muted"},U=i(()=>t("span",{class:"arrow-animation"},[t("span",{class:"arrow"}," → ")],-1)),G={class:"fw-bold"},K={class:"flex-classic gap-3"},M=["disabled"],W={key:0,role:"status",class:"spinner-border spinner-border-sm"},X=i(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),Y=[X],Z={key:1,class:"bi bi-cart-plus-fill"},$=i(()=>t("span",{class:"ms-2"},"加入購物車",-1));function tt(o,e,s,ot,d,st){const h=k("RouterLink");return l(),c("div",N,[t("div",T,[t("div",P,[C(h,{to:`/product/${s.product.id}`},{default:y(()=>[t("img",{class:"card-img-top",src:s.product.imageUrl,alt:s.product.title,loading:"lazy",onLoad:e[0]||(e[0]=r=>d.imageLoading=!1)},null,40,z),B,d.imageLoading?(l(),c("div",V,J)):_("",!0)]),_:1},8,["to"])])]),t("div",O,[t("div",R,[t("div",j,[t("div",q,[t("h4",D,n(s.product.title),1)]),t("div",E,[H,s.product.price<s.product.origin_price?(l(),c(S,{key:0},[t("span",null,[t("span",Q,n(s.product.origin_price),1)]),U],64)):_("",!0),t("span",G,n(s.product.price)+" 元",1)])])]),t("div",K,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:e[1]||(e[1]=r=>o.toggleCollection(s.product.id))},[t("i",{class:I(["bi",o.isCollection(s.product.id)?"bi-heart-fill":"bi-heart"])},null,2)]),t("button",{type:"button",class:"w-100 btn btn-primary",onClick:e[2]||(e[2]=r=>o.addToCart(s.product.id)),disabled:o.loadingTask===s.product.id},[o.loadingTask===s.product.id?(l(),c("div",W,Y)):(l(),c("i",Z)),$],8,M)])])])}const dt=v(A,[["render",tt],["__scopeId","data-v-e1c7b566"]]);export{dt as P,L as u};
