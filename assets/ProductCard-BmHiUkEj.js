import{d as _,m as h,a as d}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{c as p}from"./userCart-B29TuF3F.js";import{a as m,l as f}from"./alert-Dw2Xe9FX.js";import{_ as g}from"./index-TqJ5F-GX.js";import{z as c,A as l,Q as t,c as b,aH as v,F as C,P as S,aq as y,al as k,ak as w}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as n,n as x}from"./@vue_shared@3.4.19-Bk7MlA8B.js";const a=m(),I=_("userCollection",{state:()=>({collection:[]}),actions:{getCollection(){this.collection=JSON.parse(localStorage.getItem("collection"))||[]},isCollection(o){return this.collection.includes(o)},toggleCollection(o){const e=this.collection.findIndex(s=>s===o);e===-1?(this.collection.push(o),a.toastAlert("已加入收藏","success")):(this.collection.splice(e,1),a.toastAlert("已移除收藏","success"))},updateCollection(){this.collection.length?localStorage.setItem("collection",JSON.stringify(this.collection)):localStorage.removeItem("collection")},clearCollection(){const o={title:"確定清空所有收藏嗎？"};a.checkAlert(o,()=>{this.collection.length=0,a.toastAlert("我們懷念它 (´・ω・`)","success")})}}}),A={props:["product"],computed:{...h(f,["loadingTask"])},methods:{...d(p,["addToCart"]),...d(I,["toggleCollection","isCollection"])}},i=o=>(k("data-v-1a5488e5"),o=o(),w(),o),N={class:"h-100 card border-0 overflow-hidden"},T={class:"overflow-hidden"},P={class:"card-img overflow-hidden"},B=["src","alt"],L=i(()=>t("div",{class:"card-navigate"},[t("button",{type:"button",class:"btn fs-4 text-light"},[t("i",{class:"bi bi-search"})])],-1)),V={class:"card-body py-5"},z={class:"mb-5"},F={class:"h-100 d-flex flex-column justify-content-between"},J={class:"flex-grow-1 d-flex gap-3 mb-3"},O={class:"fs-5 fw-bold text-primary overflow-scroll mb-0 text-nowrap"},R={class:"fs-6 text-start"},j=i(()=>t("span",null,"NT＄",-1)),q={class:"text-decoration-line-through text-muted"},D=i(()=>t("span",{class:"arrow-animation"},[t("span",{class:"arrow"}," → ")],-1)),E={class:"fw-bold"},H={class:"flex-classic gap-3"},Q=["disabled"],U={key:0,role:"status",class:"spinner-border spinner-border-sm"},G=i(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),K=[G],M={key:1,class:"bi bi-cart-plus-fill"},W=i(()=>t("span",{class:"ms-2"},"加入購物車",-1));function X(o,e,s,Y,Z,$){const r=y("RouterLink");return c(),l("div",N,[t("div",T,[t("div",P,[b(r,{to:`/product/${s.product.id}`},{default:v(()=>[t("img",{class:"card-img-top",src:s.product.imageUrl,alt:s.product.title},null,8,B),L]),_:1},8,["to"])])]),t("div",V,[t("div",z,[t("div",F,[t("div",J,[t("h4",O,n(s.product.title),1)]),t("div",R,[j,s.product.price<s.product.origin_price?(c(),l(C,{key:0},[t("span",null,[t("span",q,n(s.product.origin_price),1)]),D],64)):S("",!0),t("span",E,n(s.product.price)+" 元",1)])])]),t("div",H,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:e[0]||(e[0]=u=>o.toggleCollection(s.product.id))},[t("i",{class:x(["bi",o.isCollection(s.product.id)?"bi-heart-fill":"bi-heart"])},null,2)]),t("button",{type:"button",class:"w-100 btn btn-primary",onClick:e[1]||(e[1]=u=>o.addToCart(s.product.id)),disabled:o.loadingTask===s.product.id},[o.loadingTask===s.product.id?(c(),l("div",U,K)):(c(),l("i",M)),W],8,Q)])])])}const lt=g(A,[["render",X],["__scopeId","data-v-1a5488e5"]]);export{lt as P,I as u};
