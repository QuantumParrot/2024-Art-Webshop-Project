import{C as g}from"./bootstrap@5.3.2_@popperjs_core@2.11.8-D5C7Xrhu.js";import{v as k}from"./validation-C0VNgoV8.js";import{m as y,a as w}from"./pinia@2.1.7_vue@3.4.19-CHKlOEZr.js";import{c as x}from"./userCart-DXhwZrUm.js";import{u as q}from"./userOrder-Q5oRcRMZ.js";import{_ as C}from"./index-D6-Ga_jm.js";import{M as S,aH as i,aq as r,aj as m,P as s,O as p,ao as N,F as V,N as z,V as f,c as a,al as O,ak as j}from"./@vue_runtime-core@3.4.19-CGfIweqO.js";import{P as l,n as _}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import"./@ckeditor_ckeditor5-vue@5.1.0-CegNn2NB.js";import"./vue@3.4.19-CdjQKHui.js";import"./@vue_runtime-dom@3.4.19-AC5g8dxk.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./@popperjs_core@2.11.8-B-7x2Wgm.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./axios@1.6.7-Di5RpEPX.js";import"./alert-rz954VAU.js";import"./sweetalert2@11.10.5-BCnrvazC.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-Bp4gs7Rm.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-Bg5iSJV4.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-DG0Fkrwv.js";import"./vue-router@4.2.5_vue@3.4.19-DxgIm9Z7.js";const B={mixins:[k],data(){return{accordion:""}},computed:{...y(x,["carts","sum"])},methods:{...w(q,["createOrder"]),toggle(){this.accordion.toggle()}},created(){this.carts.length||this.$router.replace("/checkout/carts")},mounted(){this.accordion=new g(this.$refs.accordion)}},o=e=>(O("data-v-7ce00cc4"),e=e(),j(),e),I={class:"alert bg-white p-lg-7 p-md-5 p-2 shadow-sm mb-5"},T={class:"accordion mb-5","aria-expanded":"false"},$={class:"accordion-item overflow-hidden"},F={class:"accordion-header"},P=o(()=>s("b",null,"查看訂單明細",-1)),M=[P],A={class:"accordion-collapse collapse",ref:"accordion"},D={class:"table-responsive px-lg-7 p-5"},E={class:"table table-hover text-nowrap"},H=o(()=>s("thead",null,[s("tr",null,[s("th",{scope:"col",width:"40%",class:"pb-3"},"項目"),s("th",{scope:"col",width:"30%",class:"text-end pb-3"},"數量"),s("th",{scope:"col",width:"30%",class:"text-end pb-3"},"小計")])],-1)),L={class:"align-middle"},G={class:"py-3"},J={class:"text-end"},K={class:"text-end"},Q={key:0},R={colspan:"2",class:"py-3"},U={class:"text-end text-danger"},W={colspan:"3",class:"text-end py-3"},X={class:"flex-classic fs-5"},Y=o(()=>s("span",null,[s("b",null,"總計")],-1)),Z={class:"p-md-7 p-5 border rounded-1"},ss={class:"mb-5"},es=o(()=>s("label",{for:"name",class:"form-label is-required"},"收件人姓名",-1)),ts={class:"invalid-feedback"},os={class:"mb-5"},as=o(()=>s("label",{for:"tel",class:"form-label is-required"},"收件人手機",-1)),ls={class:"invalid-feedback"},is={class:"mb-5"},cs=o(()=>s("label",{for:"email",class:"form-label is-required"},"收件人信箱",-1)),ns={class:"invalid-feedback"},ds={class:"mb-5"},rs=o(()=>s("label",{for:"address",class:"form-label is-required"},"收件人地址",-1)),ms={class:"invalid-feedback"},_s={class:"mb-5"},ps=o(()=>s("label",{for:"project",class:"form-label"},"選擇您想贊助的計畫",-1)),us=o(()=>s("option",{value:"",selected:""},"不指定",-1)),hs=o(()=>s("option",{value:"野生動物救援計畫"},"野生動物救援計畫",-1)),fs=o(()=>s("option",{value:"海洋保育計畫"},"海洋保育計畫",-1)),bs=o(()=>s("label",{for:"message",class:"form-label"},"備註與留言",-1)),vs={class:"flex-classic"},gs=["onClick"],ks=o(()=>s("span",{class:"text-highlight"},[s("i",{class:"bi bi-caret-left-fill"})],-1)),ys=o(()=>s("button",{type:"submit",class:"btn btn-highlight rounded-1"}," 送出訂單",-1));function ws(e,u,xs,qs,Cs,h){const c=r("v-field"),n=r("error-message"),b=r("router-link"),v=r("v-form");return m(),S(v,{onSubmit:e.createOrder},{default:i(({errors:d})=>[s("div",I,[s("div",T,[s("div",$,[s("div",F,[s("button",{type:"button",class:"accordion-button","aria-expanded":"false",onClick:u[0]||(u[0]=(...t)=>h.toggle&&h.toggle(...t))},M)]),s("div",A,[s("div",D,[s("table",E,[H,s("tbody",L,[(m(!0),p(V,null,N(e.carts,t=>(m(),p("tr",{key:t.id},[s("td",G,l(t.product.title),1),s("td",J,l(t.qty),1),s("td",K,l(t.total),1)]))),128)),e.carts[0].coupon?(m(),p("tr",Q,[s("td",R,[s("span",null,"優惠券："+l(e.carts[0].coupon.code),1)]),s("td",U," － "+l(e.sum.total-e.sum.finalTotal),1)])):z("",!0)]),s("tfoot",null,[s("tr",null,[s("td",W,[s("div",X,[Y,s("span",null,[f("NT＄"),s("b",null,l(e.sum.finalTotal),1)])])])])])])])],512)])]),s("div",Z,[s("div",ss,[es,a(c,{id:"name",type:"text",class:_(["form-control mb-3",{"is-invalid":d.name}]),name:"name",rules:"required"},null,8,["class"]),a(n,{name:"name"},{default:i(({message:t})=>[s("p",ts,l(e.localize(t,"name")),1)]),_:1})]),s("div",os,[as,a(c,{id:"tel",type:"tel",class:_(["form-control mb-3",{"is-invalid":d.tel}]),name:"tel",rules:e.isPhone},null,8,["class","rules"]),a(n,{name:"tel"},{default:i(({message:t})=>[s("p",ls,l(e.localize(t,"tel")),1)]),_:1})]),s("div",is,[cs,a(c,{id:"email",type:"email",class:_(["form-control mb-3",{"is-invalid":d.email}]),name:"email",rules:"required|email"},null,8,["class"]),a(n,{name:"email"},{default:i(({message:t})=>[s("p",ns,l(e.localize(t,"email")),1)]),_:1})]),s("div",ds,[rs,a(c,{id:"address",type:"text",class:_(["form-control mb-3",{"is-invalid":d.address}]),name:"address",rules:"required"},null,8,["class"]),a(n,{name:"address"},{default:i(({message:t})=>[s("p",ms,l(e.localize(t,"address")),1)]),_:1})]),s("div",_s,[ps,a(c,{id:"project",name:"project",as:"select",class:"form-select"},{default:i(()=>[us,hs,fs]),_:1})]),s("div",null,[bs,a(c,{id:"message",name:"message",rows:"5",class:"form-control",as:"textarea"})])])]),s("div",vs,[a(b,{to:"/checkout/carts"},{default:i(({navigate:t})=>[s("button",{type:"button",class:"btn btn-outline-secondary rounded-1",onClick:t},[ks,f(" 上一步")],8,gs)]),_:1}),ys])]),_:1},8,["onSubmit"])}const Xs=C(B,[["render",ws],["__scopeId","data-v-7ce00cc4"]]);export{Xs as default};
