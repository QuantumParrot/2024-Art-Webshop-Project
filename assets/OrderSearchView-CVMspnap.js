import{d as w,m as _,a as N}from"./pinia@2.1.7_vue@3.4.19-4NNq-WPh.js";import{a as h}from"./axios@1.6.7-Di5RpEPX.js";import{l as V}from"./loader-BKOny_iI.js";import{a as E}from"./alert-C8z9YHNp.js";import{a as C}from"./adminOrder-425pCpgG.js";import{_ as I}from"./index-kzKWix_k.js";import{P as e,n as u,l as j}from"./@vue_shared@3.4.19-Bk7MlA8B.js";import{O as l,P as t,c as b,aH as k,F as f,V as r,ao as L,N as O,aq as y,aj as i}from"./@vue_runtime-core@3.4.19-CzGklseq.js";import"./vue-demi@0.14.7_vue@3.4.19-Dq6ymT-8.js";import"./@vue_reactivity@3.4.19-Ddpy7v_1.js";import"./sweetalert2@11.10.5-szm5w3W2.js";import"./@ckeditor_ckeditor5-vue@5.1.0-CfUo4zCs.js";import"./vue@3.4.19-dGbATgA4.js";import"./@vue_runtime-dom@3.4.19-DVfTC9pq.js";/* empty css                               */import"./vee-validate@4.12.5_vue@3.4.19-CIwtLcK9.js";import"./@vee-validate_rules@4.12.5_vue@3.4.19-CtCrC8gK.js";import"./@vee-validate_i18n@4.12.5-DXNnfMG0.js";import"./vue-axios@3.5.2_axios@1.6.7_vue@3.4.19-BaogFJPH.js";import"./moment@2.30.1-Cl4UOzQZ.js";import"./vue-loading-overlay@6.0.4_vue@3.4.19-Ds2EadH1.js";import"./vue-router@4.2.5_vue@3.4.19-CGkOaO3i.js";var B={VITE_APP_SITE:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ataraxia",BASE_URL:"/2024-Art-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const n=V(),c=E(),{VITE_APP_SITE:g,VITE_APP_PATH:v}=B,S=w("userOrder",{states:()=>({order:{}}),getters:{tempOrder:({order:s})=>{if(s!=null&&s.message.startsWith('{"')){const o=JSON.parse(s.message);return{...s,message:o.message,state:+o.state,project:o.project}}return{...s,state:0,project:"不指定"}}},actions:{getOrder(s,o){n.createLoader("get-single-order"),h.get(`${g}/api/${v}/order/${s}`).then(p=>{const{order:d}=p.data;d!==null?this.order=d:c.toastAlert("查無此訂單","error")}).finally(()=>{n.removeLoader("get-single-order"),o()})},payOrder(s){n.createLoader("pay-order"),h.post(`${g}/api/${v}/pay/${s}`).then(()=>{const o={title:"謝謝您！",text:"我們將立即為您出貨，敬請耐心等待等候！",icon:"success"};c.modalAlert(o),this.getOrder(s)}).catch(o=>c.errorAlert(o)).finally(()=>n.removeLoader("pay-order"))}}}),D={computed:{..._(S,["tempOrder"]),..._(C,["statesCode"])},methods:{...N(S,["getOrder","payOrder"]),submitOrderId({id:s},{resetForm:o}){this.getOrder(s,o)}}},q={class:"h-100 bg-secondary text-white"},H={class:"container py-7"},R={class:"row justify-content-center"},z={class:"col-md-6"},F=t("h3",{class:"h2 mb-7"},[t("i",{class:"bi bi-search me-2"}),r(" 查詢訂單進度 ")],-1),W=t("label",{for:"search",class:"mb-5"},"請輸入訂單編號：",-1),G={class:"input-group mb-5"},J=t("button",{type:"submit",class:"btn btn-primary"},[t("i",{class:"bi bi-search"})],-1),K=t("details",{class:"alert bg-light text-primary mb-5"},[t("summary",null,"可供使用的範例"),t("ul",{class:"list-unstyled mt-4 mb-0"},[t("li",null,"-Nr_GNNyiZSiTAKt9xTw")])],-1),M=t("p",{class:"mb-5"},"您的搜尋結果：",-1),U={class:"card p-2"},Z={class:"border rounded-2 p-5"},x=t("b",{class:"p-title"},"訂單編號",-1),Q=t("b",{class:"p-title"},"訂購日期",-1),X={class:"mb-3"},Y=t("summary",null,[t("b",{class:"p-title"},"訂購人資訊"),r("（ 展開查看詳細 ）")],-1),tt={class:"list-unstyled mt-3"},st={class:"mb-2"},et=t("b",null,"姓名",-1),ot={class:"mb-2"},rt=t("b",null,"電話",-1),at={class:"mb-2"},lt=t("p",{class:"mb-2"},[t("b",null,"地址"),r("：")],-1),it={class:"mb-2"},nt={class:"mb-2"},dt=t("b",null,"信箱",-1),ct={class:"mb-2"},pt=t("b",null,"選擇贊助的專案",-1),mt=t("p",{class:"mb-2"},[t("b",null,"您的留言：")],-1),_t={class:"mb-2"},ht=t("p",null,[t("b",{class:"p-title mb-0"},"訂購品項"),r("：")],-1),ut={class:"table-responsive"},bt={class:"table text-nowrap"},ft=t("thead",null,[t("tr",null,[t("th",{scope:"col"}),t("th",{scope:"col",width:"20%"}),t("th",{scope:"col",width:"10%"}),t("th",{scope:"col",width:"20%"})])],-1),Ot={class:"align-middle"},yt={class:"ps-0"},gt=t("td",null,[t("span",{class:"arrow-animation"},[t("span",{class:"arrow"},"→")])],-1),vt={class:"pe-0 text-end"},St={class:"flex-classic"},$t=t("span",null,"NT$",-1),Pt={colspan:"5",class:"px-0 py-3"},Tt={class:"flex-classic"},At={class:"mb-0"},wt=t("strong",null,"總計：",-1),Nt={class:"d-flex align-items-center"},Vt=t("span",null,[t("b",{class:"p-title"},"付款狀態"),r("：")],-1),Et={class:"mb-0"},Ct=t("span",null,[t("b",{class:"p-title"},"出貨狀態"),r("：")],-1);function It(s,o,p,d,jt,$){var m;const P=y("v-field"),T=y("v-form");return i(),l("div",q,[t("div",H,[t("div",R,[t("div",z,[F,W,b(T,{onSubmit:$.submitOrderId},{default:k(({errors:a})=>[t("div",G,[b(P,{id:"search",type:"text",class:u(["form-control",{"is-invalid":a.id}]),name:"id",rules:"required","validate-on-change":!0},null,8,["class"]),J])]),_:1},8,["onSubmit"]),K,(m=s.tempOrder)!=null&&m.id?(i(),l(f,{key:0},[M,t("div",U,[t("div",Z,[t("p",null,[x,r("："+e(s.tempOrder.id),1)]),t("p",null,[Q,r("： "),t("span",null,e(s.$calc.formatTime(s.tempOrder.create_at*1e3)),1)]),t("details",X,[Y,t("ul",tt,[t("li",st,[et,r("："+e(s.tempOrder.user.name),1)]),t("li",ot,[rt,r("："+e(s.tempOrder.user.tel),1)]),t("li",at,[lt,t("p",it,e(s.tempOrder.user.address),1)]),t("li",nt,[dt,r("："+e(s.tempOrder.user.email),1)]),t("li",ct,[pt,r("："+e(s.tempOrder.project),1)]),t("li",null,[mt,t("p",_t,e(s.tempOrder.message),1)])])]),ht,t("div",ut,[t("table",bt,[ft,t("tbody",Ot,[(i(!0),l(f,null,L(s.tempOrder.products,(a,A)=>(i(),l("tr",{key:A},[t("td",yt,e(a.product.title),1),t("td",null,e(a.qty)+" "+e(a.product.unit),1),gt,t("td",vt,[t("div",St,[$t,t("span",null,e(a.total),1)])])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",Pt,[t("div",Tt,[t("p",At,[wt,r("NT$ "+e(s.tempOrder.total),1)]),s.tempOrder.is_paid?O("",!0):(i(),l("button",{key:0,type:"button",class:"btn btn-highlight",onClick:o[0]||(o[0]=a=>s.payOrder(s.tempOrder.id))}," 付款去"))])])])])]),t("p",Nt,[Vt,t("span",{class:u(["me-2",s.tempOrder.is_paid?"text-success":"text-danger"])},e(s.tempOrder.is_paid?"已付款":"未付款"),3)]),t("p",Et,[Ct,t("span",{style:j({color:s.statesCode[s.tempOrder.state].color})},e(s.statesCode[s.tempOrder.state].title),5)])])])])],64)):O("",!0)])])])])}const es=I(D,[["render",It]]);export{es as default};
