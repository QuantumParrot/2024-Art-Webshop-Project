import{d as m,m as p,a as _}from"./pinia@2.1.7_vue@3.4.19-BGrtT45R.js";import{c as g}from"./userCart-B29TuF3F.js";import{a as f,l as b}from"./alert-Dw2Xe9FX.js";import{m as v}from"./@vue_runtime-dom@3.4.19-Jk3xLe3-.js";import{_ as C}from"./index-Cbhzms45.js";import{z as l,A as c,Q as t,c as y,aH as S,aJ as w,P as u,F as k,aq as x,al as L,ak as I}from"./@vue_runtime-core@3.4.19-CKRBtKAL.js";import{P as d,n as A}from"./@vue_shared@3.4.19-Bk7MlA8B.js";const n=f(),N=m("userCollection",{state:()=>({collection:[]}),actions:{getCollection(){this.collection=JSON.parse(localStorage.getItem("collection"))||[]},isCollection(o){return this.collection.includes(o)},toggleCollection(o){const e=this.collection.findIndex(s=>s===o);e===-1?(this.collection.push(o),n.toastAlert("已加入收藏","success")):(this.collection.splice(e,1),n.toastAlert("已移除收藏","success"))},updateCollection(){this.collection.length?localStorage.setItem("collection",JSON.stringify(this.collection)):localStorage.removeItem("collection")},clearCollection(){const o={title:"確定清空所有收藏嗎？"};n.checkAlert(o,()=>{this.collection.length=0,n.toastAlert("我們懷念它 (´・ω・`)","success")})}}}),T={props:["product"],data(){return{imageLoading:!0}},computed:{...p(b,["loadingTask"])},methods:{..._(g,["addToCart"]),..._(N,["toggleCollection","isCollection"])}},i=o=>(L("data-v-6099eee4"),o=o(),I(),o),P={class:"h-100 card border-0 overflow-hidden"},z={class:"overflow-hidden"},B={class:"card-img overflow-hidden"},J=["src","alt"],V={class:"card-nav"},D=i(()=>t("button",{type:"button",class:"btn fs-4 text-light"},[t("i",{class:"bi bi-search"})],-1)),F=[D],O={key:0,class:"card-loading"},R=i(()=>t("div",{role:"status",class:"spinner-border spinner-border"},[t("span",{class:"visually-hidden"},"Loading...")],-1)),j=[R],q={class:"card-body py-5"},E={class:"mb-5"},H={class:"h-100 d-flex flex-column justify-content-between"},Q={class:"flex-grow-1 d-flex gap-3 mb-3"},U={class:"fs-5 fw-bold text-primary overflow-scroll mb-0 text-nowrap"},G={class:"fs-6 text-start"},K=i(()=>t("span",null,"NT＄",-1)),M={class:"text-decoration-line-through text-muted"},W=i(()=>t("span",{class:"arrow-animation"},[t("span",{class:"arrow"}," → ")],-1)),X={class:"fw-bold"},Y={class:"flex-classic gap-3"},Z=["disabled"],$={key:0,role:"status",class:"spinner-border spinner-border-sm"},tt=i(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),ot=[tt],st={key:1,class:"bi bi-cart-plus-fill"},et=i(()=>t("span",{class:"ms-2"},"加入購物車",-1));function it(o,e,s,lt,a,ct){const h=x("RouterLink");return l(),c("div",P,[t("div",z,[t("div",B,[y(h,{to:`/product/${s.product.id}`},{default:S(()=>[t("img",{class:"card-img-top",src:s.product.imageUrl,alt:s.product.title,loading:"lazy",onLoad:e[0]||(e[0]=r=>a.imageLoading=!1)},null,40,J),w(t("div",V,F,512),[[v,!a.imageLoading]]),a.imageLoading?(l(),c("div",O,j)):u("",!0)]),_:1},8,["to"])])]),t("div",q,[t("div",E,[t("div",H,[t("div",Q,[t("h4",U,d(s.product.title),1)]),t("div",G,[K,s.product.price<s.product.origin_price?(l(),c(k,{key:0},[t("span",null,[t("span",M,d(s.product.origin_price),1)]),W],64)):u("",!0),t("span",X,d(s.product.price)+" 元",1)])])]),t("div",Y,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:e[1]||(e[1]=r=>o.toggleCollection(s.product.id))},[t("i",{class:A(["bi",o.isCollection(s.product.id)?"bi-heart-fill":"bi-heart"])},null,2)]),t("button",{type:"button",class:"w-100 btn btn-primary",onClick:e[2]||(e[2]=r=>o.addToCart(s.product.id)),disabled:o.loadingTask===s.product.id},[o.loadingTask===s.product.id?(l(),c("div",$,ot)):(l(),c("i",st)),et],8,Z)])])])}const mt=C(T,[["render",it],["__scopeId","data-v-6099eee4"]]);export{mt as P,N as u};
